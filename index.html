
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>å¤§æ¬¢çš„æŠ€æœ¯åšå®¢</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="å¤§æ¬¢çš„æŠ€æœ¯åšå®¢">
<meta property="og:url" content="http://lyjh.net/index.html">
<meta property="og:site_name" content="å¤§æ¬¢çš„æŠ€æœ¯åšå®¢">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="å¤§æ¬¢çš„æŠ€æœ¯åšå®¢">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="å¤§æ¬¢çš„æŠ€æœ¯åšå®¢" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
</head>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">å¤§æ¬¢çš„æŠ€æœ¯åšå®¢</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">æ²¡äº‹çˆ±ç§€æŠ€æœ¯çš„iOSè®²å¸ˆï¼Œæ­£åœ¨å‡è‚¥çš„èƒ–çº¸ï¼Œçˆ±å–å•¤é…’çš„æ¢¦æƒ³å®¶ã€‚</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">é¦–é¡µ</a>
        
          <a class="main-nav-link" href="/archives">å½’æ¡£</a>
        
          <a class="main-nav-link" href="/about">å…³äº</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="http://www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
          <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
          <input type="submit" value="" class="search-form-submit">
          <input name=tn type=hidden value="bds">
          <input name=cl type=hidden value="3">
          <input name=ct type=hidden value="2097152">
          <input type="hidden" name="si" value="lyjh.net">
        </form>
      </div>
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main">
  
    <article id="post-iOSè®¾è®¡æ¨¡å¼KVO" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/03/iOSè®¾è®¡æ¨¡å¼KVO/" class="article-date">
  <time datetime="2015-12-03T08:04:55.000Z" itemprop="datePublished">2015-12-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/æŠ€æœ¯æ–‡ç« /">æŠ€æœ¯æ–‡ç« </a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/03/iOSè®¾è®¡æ¨¡å¼KVO/">iOSè®¾è®¡æ¨¡å¼ â€”â€” KV0</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="åˆ¨æ ¹é—®åº•KVO">åˆ¨æ ¹é—®åº•KVO</h2><p>KVO å…¨ç§° Key-Value Observingã€‚ä¸­æ–‡å«é”®å€¼è§‚å¯Ÿã€‚KVOå…¶å®æ˜¯ä¸€ç§è§‚å¯Ÿè€…æ¨¡å¼ï¼Œè§‚å¯Ÿè€…åœ¨é”®å€¼æ”¹å˜æ—¶ä¼šå¾—åˆ°é€šçŸ¥,åˆ©ç”¨å®ƒå¯ä»¥å¾ˆå®¹æ˜“å®ç°è§†å›¾ç»„ä»¶å’Œæ•°æ®æ¨¡å‹çš„åˆ†ç¦»ï¼Œå½“æ•°æ®æ¨¡å‹çš„å±æ€§å€¼æ”¹å˜ä¹‹åä½œä¸ºç›‘å¬å™¨çš„è§†å›¾ç»„ä»¶å°±ä¼šè¢«æ¿€å‘ï¼Œæ¿€å‘æ—¶å°±ä¼šå›è°ƒç›‘å¬å™¨è‡ªèº«ã€‚ç›¸æ¯”Notificationï¼ŒKVOæ›´åŠ çš„ç®€å•ç›´æ¥ã€‚</p>
<p>KVOçš„æ“ä½œæ–¹æ³•ç”±NSKeyValueCodingæä¾›ï¼Œè€Œä»–æ˜¯NSObjectçš„ç±»åˆ«ï¼Œä¹Ÿå°±æ˜¯è¯´ObjCä¸­å‡ ä¹æ‰€æœ‰çš„å¯¹è±¡éƒ½æ”¯æŒKVOæ“ä½œã€‚</p>
<p>KVOçš„ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯ç®€å•çš„3æ­¥ã€‚</p>
<ol>
<li>æ³¨å†Œéœ€è¦è§‚å¯Ÿçš„å¯¹è±¡çš„å±æ€§addObserver:forKeyPath:options:context:</li>
<li>å®ç°observeValueForKeyPath:ofObject:change:context:æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å½“è§‚å¯Ÿçš„å±æ€§å˜åŒ–æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨.åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è¿˜é€šè¿‡NSKeyValueObservingOptionNewè¿™ä¸ªå‚æ•°è¦æ±‚æŠŠæ–°å€¼åœ¨dictionaryä¸­ä¼ é€’è¿‡æ¥ã€‚</li>
<li>å–æ¶ˆæ³¨å†Œè§‚å¯ŸremoveObserver:forKeyPath:context:</li>
</ol>
<p>æˆ‘ä»¬è§‚å¯Ÿä¸‹ä»£ç å®ç°,æ¢ç©¶å®ç°åŸç†ï¼š</p>
<p>Person.h</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#import <span class="title">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Person</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)registerObserver;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">NSInteger</span> age;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>Person.m</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#import <span class="title">"Person.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">Person</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)registerObserver &#123;</span><br><span class="line">    </span><br><span class="line">    [<span class="keyword">self</span> addObserver:<span class="keyword">self</span> forKeyPath:<span class="string">@"age"</span> options:<span class="built_in">NSKeyValueObservingOptionNew</span>|<span class="built_in">NSKeyValueObservingOptionOld</span> context:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *)description &#123;</span><br><span class="line">    <span class="keyword">return</span> [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@,%ld"</span>,[<span class="keyword">self</span> valueForKey:<span class="string">@"isa"</span>],<span class="keyword">self</span><span class="variable">.age</span>];</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)observeValueForKeyPath:(<span class="built_in">NSString</span> *)keyPath ofObject:(<span class="keyword">id</span>)object change:(<span class="built_in">NSDictionary</span>&lt;<span class="built_in">NSString</span> *,<span class="keyword">id</span>&gt; *)change context:(<span class="keyword">void</span> *)context &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> ([keyPath isEqualToString:<span class="string">@"age"</span>]) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>,change);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        [<span class="keyword">super</span> observeValueForKeyPath:keyPath ofObject:object change:change context:context];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)dealloc &#123;</span><br><span class="line">    [<span class="keyword">self</span> removeObserver:<span class="keyword">self</span> forKeyPath:<span class="string">@"age"</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>mainå‡½æ•°</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Person * <span class="variable">p =</span> [[Person alloc] init];</span><br><span class="line">p.<span class="variable">age =</span> <span class="number">20</span>;</span><br><span class="line">NSLog(@<span class="string">"%@"</span>,p);</span><br><span class="line"></span><br><span class="line">[p registerObserver];</span><br><span class="line"></span><br><span class="line">p.<span class="variable">age =</span> <span class="number">30</span>;</span><br><span class="line">NSLog(@<span class="string">"%@"</span>,p);</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œç¨‹åºæ‰“å°å‡ºçš„logæ—¥å¿—ä¸ºï¼š</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Person,<span class="number">20</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="variable">kind =</span> <span class="number">1</span>;</span><br><span class="line">    <span class="variable">new =</span> <span class="number">30</span>;</span><br><span class="line">    <span class="variable">old =</span> <span class="number">20</span>;</span><br><span class="line">&#125;</span><br><span class="line">NSKVONotifying_Person,<span class="number">30</span></span><br></pre></td></tr></table></figure>
<p>ä¸è¦å¤ªæƒŠè®¶ï¼Œæˆ‘ä»¬æ…¢æ…¢è§£é‡Šã€‚</p>
<p>æˆ‘é‡å†™çš„<code>Person</code>ç±»çš„<code>description</code>æ–¹æ³•ï¼Œä½¿ç”¨KVCæ‹¿åˆ°<code>isa</code>æŒ‡é’ˆï¼Œè·å–åˆ°selfçš„ç±»åï¼Œæˆ‘ä»¬å‘ç°åœ¨ä½¿ç”¨KVOä¹‹å‰ç±»åæ˜¯<code>Person</code>,ä½†æ³¨å†Œäº†KVOä¹‹åï¼Œç±»åå˜æˆäº†<code>NSKVONotifying_Person</code>ã€‚</p>
<p>ä¸»è¦æ˜¯å› ä¸ºKVOçš„å®ç°ä½¿ç”¨äº†<code>isa-swizzling</code>ã€‚åœ¨ç¨‹åºè¿è¡Œæ—¶<code>Person</code>ä¼šç”Ÿæˆä¸€ä¸ªæ´¾ç”Ÿç±»<code>NSKVONotifying_Person</code>ï¼Œåœ¨è¿™ä¸ªæ´¾ç”Ÿç±»ä¸­é‡å†™åŸºç±»ä¸­ä»»ä½•è¢«è§‚å¯Ÿå±æ€§çš„<code>setter</code>æ–¹æ³•ï¼Œç”¨æ¥æ¬ºéª—ç³»ç»Ÿé¡¶æ›¿åŸå…ˆçš„ç±»ã€‚åœ¨<code>setter</code>æ–¹æ³•ä¸­å®ç°çœŸæ­£çš„é€šçŸ¥æœºåˆ¶.</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯ä»¥åˆ°ä¼ªä»£ç </span></span><br><span class="line"></span><br><span class="line">- (<span class="typename">void</span>)<span class="string">setAge:</span>(<span class="typename">int</span>)age</span><br><span class="line">&#123;</span><br><span class="line">	[<span class="keyword">super</span> <span class="string">setAge:</span>age];</span><br><span class="line"> 	[ç›‘å¬å™¨ <span class="string">observeValueForKeyPath:</span>@<span class="string">"age"</span> <span class="string">ofObject:</span>self  <span class="string">change:</span>@&#123;&#125;  <span class="string">context:</span>nil];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬åˆå¯ä»¥çŒœæµ‹ï¼Œä½¿ç”¨KVOï¼Œå†…éƒ¨ä¸€å®šæ‰§è¡Œsetteræ–¹æ³•ã€‚</p>
<p>å½“æˆ‘ä»¬æŠŠä¸Šé¢ä»£ç  <code>p.age = 30;</code>æ”¹æˆ<code>p-&gt;_age = 30;</code></p>
<p>ä½ ä¼šå‘ç°KVOçš„æ–¹æ³•ä¸èµ°äº†ï¼Œä¹Ÿè¯å®äº†è¿™ç‚¹ã€‚</p>
<p>å¦‚æœpä¸æä¾›setAgeï¼ŒgetAgeæ–¹æ³•ï¼Œè¿˜æƒ³ç”¨KVO.</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[p <span class="string">willChangeValueForKey:</span>@<span class="string">"age"</span>];</span><br><span class="line">p-&gt;_age = <span class="number">30</span>;</span><br><span class="line">[p <span class="string">didChangeValueForKey:</span>@<span class="string">"age"</span>];</span><br></pre></td></tr></table></figure>
<p>è‹¹æœå®˜æ–¹KVOæ–‡æ¡£ï¼š</p>
<p><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html" target="_blank" rel="external">https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html</a></p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://lyjh.net/2015/12/03/iOSè®¾è®¡æ¨¡å¼KVO/" data-id="cihpmvh7d000oq0wqplupwp63" class="article-share-link" data-share="baidu">åˆ†äº«åˆ°</a>
      

      
        <a href="http://lyjh.net/2015/12/03/iOSè®¾è®¡æ¨¡å¼KVO/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/è®¾è®¡æ¨¡å¼/">è®¾è®¡æ¨¡å¼</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-iOSè®¾è®¡æ¨¡å¼KVC" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/02/iOSè®¾è®¡æ¨¡å¼KVC/" class="article-date">
  <time datetime="2015-12-02T08:04:55.000Z" itemprop="datePublished">2015-12-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/æŠ€æœ¯æ–‡ç« /">æŠ€æœ¯æ–‡ç« </a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/02/iOSè®¾è®¡æ¨¡å¼KVC/">iOSè®¾è®¡æ¨¡å¼ â€”â€” KVC</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>å‡ºå·®ä¸€ä¸ªå¤šæœˆï¼Œä¸€ç›´æ²¡æ›´æ–°åšå®¢ã€‚çœ‹ç€è®¿é—®é‡ä¸€ç›´å¢é«˜ï¼Œå¼€å¿ƒã€‚</p>
<p>è¿™ä¸€ä¸ªæœˆä¸»è¦è®²çš„OC,ç ”ç©¶äº†ä¸‹iOSè®¾è®¡æ¨¡å¼é‡Œçš„KVC,KVOã€‚æˆ‘ä»¬å°±åœ¨è¿™é‡Œå” å” è¿™ä¸ªã€‚</p>
<h2 id="åˆ¨æ ¹é—®åº•KVC">åˆ¨æ ¹é—®åº•KVC</h2><p>KVC å…¨ç§° key valued coding é”®å€¼ç¼–ç </p>
<p>åå°„æœºåˆ¶æ˜¯åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³•å’Œå±æ€§.JAVA,C#éƒ½æœ‰è¿™ä¸ªæœºåˆ¶ã€‚ObjCä¹Ÿæœ‰ï¼Œæ‰€ä»¥ä½ æ ¹éƒ¨ä¸å¿…è¿›è¡Œä»»ä½•æ“ä½œå°±å¯ä»¥è¿›è¡Œå±æ€§çš„åŠ¨æ€è¯»å†™ï¼Œå°±æ˜¯KVCã€‚</p>
<p>KVCçš„æ“ä½œæ–¹æ³•ç”±NSKeyValueCodingæä¾›ï¼Œè€Œä»–æ˜¯NSObjectçš„ç±»åˆ«ï¼Œä¹Ÿå°±æ˜¯è¯´ObjCä¸­å‡ ä¹æ‰€æœ‰çš„å¯¹è±¡éƒ½æ”¯æŒKVCæ“ä½œã€‚</p>
<p>Person.h</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">Person</span> : <span class="title">NSObject</span></span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> weight;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">readonly</span>,<span class="keyword">copy</span>) <span class="built_in">NSString</span> *name;</span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">readonly</span>, <span class="keyword">assign</span>) <span class="keyword">int</span> age;</span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">strong</span>) Dog * dog;</span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">assign</span>) <span class="keyword">id</span> ID;</span><br><span class="line"></span><br><span class="line">-(instancetype)initWithDict:(<span class="built_in">NSDictionary</span> *)dict;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>Person.m</p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="objectivec"><span class="class"><span class="keyword">@implementation</span> <span class="title">Person</span></span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> _height;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">-(instancetype)initWithDict:(<span class="built_in">NSDictionary</span> *)dict</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>=[<span class="keyword">super</span> init])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//å­—å…¸è½¬æ¨¡å‹çš„å¸¸ç”¨è¯­å¥</span></span><br><span class="line">        [<span class="keyword">self</span> setValuesForKeysWithDictionary:dict];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å½“keyçš„å€¼æ˜¯æ²¡æœ‰å®šä¹‰æ—¶ï¼Œè®¾ç½®ä¼šæ‰§è¡Œçš„æ–¹æ³•</span></span><br><span class="line">- (<span class="keyword">void</span>)setValue:(<span class="keyword">id</span>)value forUndefinedKey:(<span class="built_in">NSString</span> *)key &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> ([key isEqualToString:<span class="string">@"id"</span>])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">self</span><span class="variable">.ID</span> = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//å½“keyçš„å€¼æ˜¯æ²¡æœ‰å®šä¹‰æ—¶ï¼Œå–å€¼æ—¶æ‰§è¡Œçš„æ–¹æ³•</span></span><br><span class="line">- (<span class="keyword">id</span>)valueForUndefinedKey:(<span class="built_in">NSString</span> *)key &#123;</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">if</span> ([key isEqualToString:<span class="string">@"id"</span>]) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span><span class="variable">.ID</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> [<span class="built_in">NSNull</span> null];</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>main.m</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Person * p1 = [[Person alloc]init];</span><br><span class="line">Dog * d1 = [[Dog alloc] init];</span><br><span class="line">p1.dog = d1;</span><br><span class="line">   </span><br><span class="line"><span class="comment">//setValue:å±æ€§å€¼ forKey:å±æ€§åï¼ˆç”¨äºç®€å•è·¯å¾„)  </span></span><br><span class="line"><span class="comment">//ä½¿ç”¨KVCé—´æ¥ä¿®æ”¹å¯¹è±¡å±æ€§æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ¤æ–­å¯¹è±¡å±æ€§çš„ç±»å‹ï¼Œå¹¶å®Œæˆè½¬æ¢ã€‚å¦‚è¯¥ç¨‹åºä¸­çš„â€œ170â€.      </span></span><br><span class="line">[p1 <span class="string">setValue:</span>@<span class="string">"170"</span> <span class="string">forKey:</span>@<span class="string">"height"</span>];</span><br><span class="line">[p1 <span class="string">setValue:</span>@<span class="string">"70"</span> <span class="string">forKey:</span>@<span class="string">"weight"</span>];</span><br><span class="line">[p1 <span class="string">setValue:</span>@<span class="string">"1"</span> <span class="string">forKey:</span>@<span class="string">"id"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//setValue:å±æ€§å€¼ forKeyPath:å±æ€§è·¯å¾„ï¼ˆç”¨äºå¤åˆè·¯å¾„)</span></span><br><span class="line"><span class="comment">//ç”¨KVCå–ä¸€ä¸ªåµŒå¥—å±‚æ¬¡å¾ˆæ·±çš„è·¯å¾„çš„æ—¶å€™ï¼Œåªè¦ç»™å®ƒä¸€ä¸ªè·¯å¾„å°±èƒ½æŠŠæƒ³è¦çš„å±æ€§ç»™æ‹¿å‡ºæ¥ã€‚ï¼ˆ.å¯ä»¥ç†è§£ä¸ºè·¯å¾„ã€‚ä¸€ç›´ä¸€ç›´è¿›å…¥ï¼‰ã€‚èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å¾ˆæ–¹ä¾¿çš„ç¼–ç ã€‚</span></span><br><span class="line">[p1 <span class="string">setValue:</span>@<span class="string">"dahuan"</span> <span class="string">forKeyPath:</span>@<span class="string">"dog.name"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//valueForKey:å±æ€§å ã€valueForKeyPath:å±æ€§åï¼ˆç”¨äºå¤åˆè·¯å¾„ï¼‰</span></span><br><span class="line">NSLog(@<span class="string">"height = %d weight = %d id = %@ dog.name = %@"</span> ,[[p1 <span class="string">valueForKey:</span>@<span class="string">"height"</span>] intValue],[[p1 <span class="string">valueForKey:</span>@<span class="string">"weight"</span>] intValue],[p1 <span class="string">valueForKey:</span>@<span class="string">"id"</span>],[p1 <span class="string">valueForKeyPath:</span>@<span class="string">"dog.name"</span>]);</span><br><span class="line"></span><br><span class="line">logæ—¥å¿—ï¼šheight = <span class="number">170</span> weight = <span class="number">70</span> id = <span class="number">11111</span> dog.name = dahuan</span><br><span class="line">æ‰€æœ‰çš„å±æ€§éƒ½å¯ä»¥èµ‹å€¼æˆåŠŸ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">NSDictionary * dict = @&#123;@<span class="string">"height"</span>:@<span class="string">"160"</span>,</span><br><span class="line">                        @<span class="string">"weight"</span>:@<span class="string">"60"</span>,</span><br><span class="line">                        @<span class="string">"id"</span>:@<span class="string">"11101"</span></span><br><span class="line">                        &#125;;</span><br><span class="line">        </span><br><span class="line">Person * p2 = [[Person alloc] <span class="string">initWithDict:</span>dict];</span><br><span class="line"></span><br><span class="line">NSLog(@<span class="string">"height = %d weight = %d id = %@"</span>,[[p2 <span class="string">valueForKey:</span>@<span class="string">"height"</span>] intValue],[[p2 <span class="string">valueForKey:</span>@<span class="string">"weight"</span>] intValue],[p2 <span class="string">valueForKey:</span>@<span class="string">"id"</span>]);</span><br><span class="line"></span><br><span class="line">logæ—¥å¿—ï¼šheight = <span class="number">160</span> weight = <span class="number">60</span> id = <span class="number">11101</span></span><br><span class="line">æ‰€æœ‰çš„å±æ€§éƒ½å¯ä»¥èµ‹å€¼æˆåŠŸ</span><br></pre></td></tr></table></figure>
<h3 id="KVCæŸ¥æ‰¾å±æ€§çš„é¡ºåº">KVCæŸ¥æ‰¾å±æ€§çš„é¡ºåº</h3><ol>
<li>ç”¨@propertyå®šä¹‰çš„å±æ€§çš„keyå€¼</li>
<li>setteræ–¹æ³•çš„keyå€¼</li>
<li>ç›´æ¥è®¿é—®æˆå‘˜å˜é‡ï¼Œå…ˆæ‰¾keyï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå†æ‰¾_key</li>
<li>ä»¥ä¸Šä¸‰ç§éƒ½æœªæ‰¾åˆ°å°±ä¼šè°ƒç”¨- (void)setValue:(id)value forUndefinedKey:(NSString *)key æ–¹æ³•ã€‚</li>
<li>å¦‚æœæ²¡æœ‰é‡å†™setValue:forUndefinedKeyç¨‹åºä¼šé©¬ä¸Šå´©æºƒã€‚</li>
</ol>
<p>æ³¨æ„ï¼šKVCå¯ä»¥è®¿é—®æˆå‘˜å˜é‡ï¼Œæ— è®ºæ˜¯å¦æä¾›getter/setteræ–¹æ³•,æ— è®ºå¯è§æ€§æ˜¯æ€æ ·ï¼Œæ˜¯å¦æœ‰readonlyä¿®é¥°ã€‚</p>
<h3 id="setValue:forUndefinedKeyä¸valueForUndefinedKeyçš„åº”ç”¨">setValue:forUndefinedKeyä¸valueForUndefinedKeyçš„åº”ç”¨</h3><p>KVCçš„ä¸»è¦ç”¨é€”æ— éæ˜¯ORMæ˜ å°„,å°±æ˜¯å°†dictionaryè½¬æ¢æˆmodel,ä½†æœ‰äº›æœåŠ¡å™¨è¿”å›çš„å­—æ®µæœ‰å¯èƒ½æ˜¯ocçš„å…³é”®å­—æ¯”å¦‚â€˜idâ€™,â€™descriptionâ€™ç­‰ã€‚å¦‚ä¸Šä»£ç ä¸¾å¾—idçš„ä¾‹å­ï¼Œæˆ‘ä»¬æ— æ³•è®©@propertyåé¢keyå€¼ä¸ºid,äºæ˜¯ä½¿ç”¨å¤§å†™çš„IDä»£æ›¿ï¼ŒKVCæ˜¯åŒºåˆ†å¤§å°å†™çš„æˆ‘ä»¬ä¸ç”¨æ‹…å¿ƒã€‚è¿™æ—¶æˆ‘ä»¬åªéœ€åœ¨setValue:forUndefinedKeyæŠŠidçš„keyå€¼èµ‹å€¼ç»™IDçš„keyå€¼ï¼Œå°±å¯ä»¥é¿å…å…³é”®å­—çš„å°´å°¬ã€‚</p>
<h3 id="KVCçš„é€†å‘ä½¿ç”¨">KVCçš„é€†å‘ä½¿ç”¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Person * p1 = [[Person alloc]init];</span><br><span class="line">[p1 <span class="built_in">set</span>Value:@<span class="string">"170"</span> <span class="keyword">for</span>Key:@<span class="string">"height"</span>];</span><br><span class="line">[p1 <span class="built_in">set</span>Value:@<span class="string">"70"</span> <span class="keyword">for</span>Key:@<span class="string">"weight"</span>];</span><br><span class="line">[p1 <span class="built_in">set</span>Value:@<span class="string">"11111"</span> <span class="keyword">for</span>Key:@<span class="string">"id"</span>];</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">NSArray * arr = @[@<span class="string">"height"</span>,@<span class="string">"weight"</span>,@<span class="string">"id"</span>];</span><br><span class="line">NSDictionary * dict = [p1 dictionaryWithValuesForKeys:arr];</span><br><span class="line">NSLog(@<span class="string">"%@"</span>,dict);</span><br><span class="line"></span><br><span class="line"><span class="built_in">log</span>æ—¥å¿—ï¼š</span><br><span class="line">&#123;</span><br><span class="line">    height = <span class="number">170</span>;</span><br><span class="line">    id = <span class="number">11111</span>;</span><br><span class="line">    weight = <span class="number">70</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="NSArrayï¼NSSetç­‰éƒ½æ”¯æŒKVC">NSArrayï¼NSSetç­‰éƒ½æ”¯æŒKVC</h3><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Person * <span class="variable">p1 =</span> [[Person alloc]init];</span><br><span class="line">Dog * <span class="variable">d1 =</span> [[Dog alloc] init];</span><br><span class="line">d1.<span class="variable">name =</span> @<span class="string">"iPhone"</span>;</span><br><span class="line">p1.<span class="variable">dog =</span> d1;</span><br><span class="line">        </span><br><span class="line">Person * <span class="variable">p2 =</span> [[Person alloc]init];</span><br><span class="line">Dog * <span class="variable">d2 =</span> [[Dog alloc] init];</span><br><span class="line">d2.<span class="variable">name =</span> @<span class="string">"ios"</span>;</span><br><span class="line">p2.<span class="variable">dog =</span> d2;</span><br><span class="line"></span><br><span class="line">NSArray *<span class="variable">persons=</span>@[p1,p2];</span><br><span class="line">   </span><br><span class="line">NSArray *<span class="variable">arrayM=</span>[persons valueForKeyPath:@<span class="string">"dog.name"</span>];</span><br><span class="line">NSLog(@<span class="string">"%@"</span>,arrayM);</span><br><span class="line"></span><br><span class="line">logæ—¥å¿—ï¼š</span><br><span class="line">(</span><br><span class="line">    iPhone,</span><br><span class="line">    ios</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="KVCè®¡ç®—">KVCè®¡ç®—</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Person * person = [[Person alloc] init];</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSMutableArray</span> * books = [<span class="built_in">NSMutableArray</span> array];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    Book * book = [[Book alloc] init];</span><br><span class="line">    book<span class="variable">.price</span> = i;</span><br><span class="line">    [books addObject:book];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">person<span class="variable">.books</span> = books;</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSNumber</span> *bookCount = [person valueForKeyPath:<span class="string">@"books.@count"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"book count :%@"</span>, bookCount);</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSNumber</span> *sum = [person valueForKeyPath:<span class="string">@"books.@sum.price"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"sum :%@"</span>, sum);</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSNumber</span> *avg = [person valueForKeyPath:<span class="string">@"books.@avg.price"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"vag :%@"</span>, avg);</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSNumber</span> *min = [person valueForKeyPath:<span class="string">@"books.@min.price"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"min :%@"</span>, min);</span><br><span class="line"></span><br><span class="line"><span class="built_in">NSNumber</span> *max = [person valueForKeyPath:<span class="string">@"books.@max.price"</span>];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"max :%@"</span>, max);</span><br></pre></td></tr></table></figure>
<h3 id="KVCåº•å±‚å®ç°">KVCåº•å±‚å®ç°</h3><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">æ¯”å¦‚è¯´å¦‚ä¸‹çš„ä¸€è¡Œ<span class="type">KVC</span>çš„ä»£ç ï¼š</span><br><span class="line"> </span><br><span class="line">[person setValue:@<span class="string">"dahuan"</span> forKey:@<span class="string">"name"</span>];</span><br><span class="line"> </span><br><span class="line">å°±ä¼šè¢«ç¼–è¯‘å™¨å¤„ç†æˆï¼š</span><br><span class="line"> </span><br><span class="line"><span class="type">SEL</span> sel = sel_get_uid (<span class="string">"setValue:forKey:"</span>);</span><br><span class="line"><span class="type">IMP</span> <span class="keyword">method</span> = objc_msg_lookup (person-&gt;isa,sel);</span><br><span class="line"><span class="keyword">method</span>(person, sel, @<span class="string">"dahuan"</span>, @<span class="string">"name"</span>);</span><br></pre></td></tr></table></figure>
<h3 id="KVCä¸runtimeåº”ç”¨">KVCä¸runtimeåº”ç”¨</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">#import <span class="title">"MyModel.h"</span></span></span><br><span class="line"><span class="preprocessor">#import <span class="title">&lt;objc/runtime.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MyModel</span></span></span><br><span class="line"> </span><br><span class="line"><span class="comment">//è§£æ¡£</span></span><br><span class="line">- (<span class="keyword">id</span>)initWithCoder:(<span class="built_in">NSCoder</span> *)decoder</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span> = [<span class="keyword">super</span> init]) &#123;</span><br><span class="line">        <span class="keyword">unsigned</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//è·å–ç±»ä¸­æ‰€æœ‰æˆå‘˜å˜é‡å</span></span><br><span class="line">        Ivar *ivar = class_copyIvarList([MyModel class], &amp;count);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;count; i++) &#123;</span><br><span class="line">            Ivar iva = ivar[i];</span><br><span class="line">            <span class="keyword">const</span> <span class="keyword">char</span> *name = ivar_getName(iva);</span><br><span class="line">            <span class="built_in">NSString</span> *strName = [<span class="built_in">NSString</span> stringWithUTF8String:name];</span><br><span class="line">            <span class="comment">//è¿›è¡Œè§£æ¡£å–å€¼</span></span><br><span class="line">            <span class="keyword">id</span> value = [decoder decodeObjectForKey:strName];</span><br><span class="line">            <span class="comment">//åˆ©ç”¨KVCå¯¹å±æ€§èµ‹å€¼</span></span><br><span class="line">            [<span class="keyword">self</span> setValue:value forKey:strName];</span><br><span class="line">        &#125;</span><br><span class="line">        free(ivar);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å½’æ¡£</span></span><br><span class="line">- (<span class="keyword">void</span>)encodeWithCoder:(<span class="built_in">NSCoder</span> *)encoder</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> count;</span><br><span class="line">    Ivar *ivar = class_copyIvarList([MyModel class], &amp;count);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;count; i++) &#123;</span><br><span class="line">        Ivar iv = ivar[i];</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">char</span> *name = ivar_getName(iv);</span><br><span class="line">        <span class="built_in">NSString</span> *strName = [<span class="built_in">NSString</span> stringWithUTF8String:name];</span><br><span class="line">        <span class="comment">//åˆ©ç”¨KVCå–å€¼</span></span><br><span class="line">        <span class="keyword">id</span> value = [<span class="keyword">self</span> valueForKey:strName];</span><br><span class="line">        [encoder encodeObject:value forKey:strName];</span><br><span class="line">    &#125;</span><br><span class="line">    free(ivar);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<p>æœ€åé™„è‹¹æœKVCå®˜æ–¹æ–‡æ¡£ï¼š</p>
<p><a href="https://developer.apple.com/library/mac/documentation/General/Conceptual/DevPedia-CocoaCore/KeyValueCoding.html" target="_blank" rel="external">https://developer.apple.com/library/mac/documentation/General/Conceptual/DevPedia-CocoaCore/KeyValueCoding.html</a></p>
<p>å…ˆæ›´æ–°ä¸€ç¯‡KVCå§,KVOæ˜å¤©å†™ï¼</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://lyjh.net/2015/12/02/iOSè®¾è®¡æ¨¡å¼KVC/" data-id="cihpmvh7g000sq0wqr4mp9hpl" class="article-share-link" data-share="baidu">åˆ†äº«åˆ°</a>
      

      
        <a href="http://lyjh.net/2015/12/02/iOSè®¾è®¡æ¨¡å¼KVC/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/è®¾è®¡æ¨¡å¼/">è®¾è®¡æ¨¡å¼</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ç®€å†æ•´ç†" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/10/ç®€å†æ•´ç†/" class="article-date">
  <time datetime="2015-10-10T08:04:55.000Z" itemprop="datePublished">2015-10-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOSé¢è¯•é¢˜/">iOSé¢è¯•é¢˜</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/10/ç®€å†æ•´ç†/">iOSé¢è¯•é¢˜</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="åŸºç¡€ç¯‡">åŸºç¡€ç¯‡</h2><h3 id="Objective-Cçš„ç±»å¯ä»¥å¤šé‡ç»§æ‰¿ä¹ˆ?å¯ä»¥é‡‡ç”¨å¤šä¸ªåè®®ä¹ˆ?">Objective-Cçš„ç±»å¯ä»¥å¤šé‡ç»§æ‰¿ä¹ˆ?å¯ä»¥é‡‡ç”¨å¤šä¸ªåè®®ä¹ˆ?</h3><p>ä¸å¯ä»¥å¤šé‡ç»§æ‰¿,å¯ä»¥é‡‡ç”¨å¤šä¸ªåè®®.</p>
<h3 id="objcä½¿ç”¨ä»€ä¹ˆæœºåˆ¶ç®¡ç†å¯¹è±¡å†…å­˜ï¼Ÿ">objcä½¿ç”¨ä»€ä¹ˆæœºåˆ¶ç®¡ç†å¯¹è±¡å†…å­˜ï¼Ÿ</h3><ol>
<li>MRC æ‰‹åŠ¨å¼•ç”¨è®¡æ•°</li>
<li>ARC è‡ªåŠ¨å¼•ç”¨è®¡æ•°,ç°åœ¨é€šå¸¸ä½¿ç”¨è‡ªåŠ¨å¼•ç”¨è®¡æ•°</li>
</ol>
<h4 id="import_è·Ÿ#include_åˆä»€ä¹ˆåŒºåˆ«ï¼Œ@classå‘¢,_ï¼ƒimport&lt;&gt;_è·Ÿ_#importâ€â€åˆä»€ä¹ˆåŒºåˆ«ï¼Ÿ">import è·Ÿ#include åˆä»€ä¹ˆåŒºåˆ«ï¼Œ@classå‘¢, ï¼ƒimport&lt;&gt; è·Ÿ #importâ€â€åˆä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p>importæ˜¯Objective-Cå¯¼å…¥å¤´æ–‡ä»¶çš„å…³é”®å­—ï¼Œ#includeæ˜¯C/C++å¯¼å…¥å¤´æ–‡ä»¶çš„å…³é”®å­—,ä½¿ç”¨#importå¤´æ–‡ä»¶ä¼šè‡ªåŠ¨åªå¯¼å…¥ä¸€æ¬¡ï¼Œä¸ä¼šé‡å¤å¯¼å…¥ï¼Œç›¸å½“äº#includeå’Œ#pragma onceï¼›@classå‘Šè¯‰ç¼–è¯‘å™¨æŸä¸ªç±»çš„å£°æ˜ï¼Œå½“æ‰§è¡Œæ—¶ï¼Œæ‰å»æŸ¥çœ‹ç±»çš„å®ç°æ–‡ä»¶ï¼Œå¯ä»¥è§£å†³å¤´æ–‡ä»¶çš„ç›¸äº’åŒ…å«ï¼›#import&lt;&gt;ç”¨æ¥åŒ…å«ç³»ç»Ÿçš„å¤´æ–‡ä»¶ï¼Œ#importâ€â€ç”¨æ¥åŒ…å«ç”¨æˆ·å¤´æ–‡ä»¶ã€‚</p>
<h3 id="æè¿°ä¸€ä¸‹iOS_SDKä¸­å¦‚ä½•å®ç°MVCçš„å¼€å‘æ¨¡å¼">æè¿°ä¸€ä¸‹iOS SDKä¸­å¦‚ä½•å®ç°MVCçš„å¼€å‘æ¨¡å¼</h3><p>MVCæ˜¯æ¨¡å‹ã€è¯•å›¾ã€æ§åˆ¶å¼€å‘æ¨¡å¼ï¼Œå¯¹äºiOS SDKï¼Œæ‰€æœ‰çš„Viewéƒ½æ˜¯è§†å›¾å±‚çš„ï¼Œå®ƒåº”è¯¥ç‹¬ç«‹äºæ¨¡å‹å±‚ï¼Œç”±è§†å›¾æ§åˆ¶å±‚æ¥æ§åˆ¶ã€‚æ‰€æœ‰çš„ç”¨æˆ·æ•°æ®éƒ½æ˜¯æ¨¡å‹å±‚ï¼Œå®ƒåº”è¯¥ç‹¬ç«‹äºè§†å›¾ã€‚æ‰€æœ‰çš„ViewControlleréƒ½æ˜¯æ§åˆ¶å±‚ï¼Œç”±å®ƒè´Ÿè´£æ§åˆ¶è§†å›¾ï¼Œè®¿é—®æ¨¡å‹æ•°æ®ã€‚</p>
<h3 id="æµ…å¤åˆ¶å’Œæ·±å¤åˆ¶çš„åŒºåˆ«ï¼Ÿ">æµ…å¤åˆ¶å’Œæ·±å¤åˆ¶çš„åŒºåˆ«ï¼Ÿ</h3><ol>
<li>æµ…å±‚å¤åˆ¶ï¼šåªå¤åˆ¶æŒ‡å‘å¯¹è±¡çš„æŒ‡é’ˆï¼Œè€Œä¸å¤åˆ¶å¼•ç”¨å¯¹è±¡æœ¬èº«ã€‚</li>
<li>æ·±å±‚å¤åˆ¶ï¼šå¤åˆ¶å¼•ç”¨å¯¹è±¡æœ¬èº«ã€‚</li>
</ol>
<p>æ„æ€å°±æ˜¯è¯´æˆ‘æœ‰ä¸ªAå¯¹è±¡ï¼Œå¤åˆ¶ä¸€ä»½åå¾—åˆ°A_copyå¯¹è±¡åï¼Œå¯¹äºæµ…å¤åˆ¶æ¥è¯´ï¼ŒAå’ŒA_copyæŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå†…å­˜èµ„æºï¼Œå¤åˆ¶çš„åªä¸è¿‡æ˜¯æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå¯¹è±¡æœ¬èº«èµ„æº<br>è¿˜æ˜¯åªæœ‰ä¸€ä»½ï¼Œé‚£å¦‚æœæˆ‘ä»¬å¯¹A_copyæ‰§è¡Œäº†ä¿®æ”¹æ“ä½œ,é‚£ä¹ˆå‘ç°Aå¼•ç”¨çš„å¯¹è±¡åŒæ ·è¢«ä¿®æ”¹ï¼Œè¿™å…¶å®è¿èƒŒäº†æˆ‘ä»¬å¤åˆ¶æ‹·è´çš„ä¸€ä¸ªæ€æƒ³ã€‚æ·±å¤åˆ¶å°±å¥½ç†è§£äº†,å†…å­˜ä¸­å­˜åœ¨äº†<br>ä¸¤ä»½ç‹¬ç«‹å¯¹è±¡æœ¬èº«ã€‚</p>
<h3 id="categoryæ˜¯ä»€ä¹ˆ?_æ‰©å±•ä¸€ä¸ªç±»çš„æ–¹å¼ç”¨ç»§æ‰¿å¥½è¿˜æ˜¯ç±»ç›®å¥½?_ä¸ºä»€ä¹ˆ?">categoryæ˜¯ä»€ä¹ˆ? æ‰©å±•ä¸€ä¸ªç±»çš„æ–¹å¼ç”¨ç»§æ‰¿å¥½è¿˜æ˜¯ç±»ç›®å¥½? ä¸ºä»€ä¹ˆ?</h3><p>categoryæ˜¯ç±»ç›®.ç”¨ç±»ç›®å¥½,å› ä¸ºç»§æ‰¿è¦æ»¡è¶³A is a Bçš„å…³ç³»,è€Œç±»ç›®åªéœ€è¦æ»¡è¶³A has a Bçš„å…³ç³»,å±€é™æ€§æ›´å°,ä½ ä¸ç”¨å®šä¹‰å­ç±»å°±èƒ½æ‰©å±•ä¸€ä¸ªç±»çš„åŠŸèƒ½,è¿˜èƒ½å°†ç±»çš„å®šä¹‰åˆ†å¼€æ”¾åœ¨ä¸åŒçš„æºæ–‡ä»¶é‡Œ,ç”¨categoryå»é‡å†™ç±»çš„æ–¹æ³•,ä»…å¯¹æœ¬categoryæœ‰æ•ˆ,ä¸ä¼šå½±å“åˆ°å…¶ä»–ç±»ä¸åŸæœ‰ç±»çš„å…³ç³»ã€‚</p>
<h3 id="å»¶å±•æ˜¯ä»€ä¹ˆ?_ä½œç”¨æ˜¯ä»€ä¹ˆ?">å»¶å±•æ˜¯ä»€ä¹ˆ? ä½œç”¨æ˜¯ä»€ä¹ˆ?</h3><p>å»¶å±•(extension):åœ¨è‡ªå·±ç±»çš„å®ç°æ–‡ä»¶ä¸­æ·»åŠ ç±»ç›®æ¥å£°æ˜ç§æœ‰æ–¹æ³•ã€‚</p>
<h3 id="è§£é‡Šä¸€ä¸‹æ‡’æ±‰æ¨¡å¼?">è§£é‡Šä¸€ä¸‹æ‡’æ±‰æ¨¡å¼?</h3><p>æ‡’æ±‰æ¨¡å¼ï¼Œåªåœ¨ç”¨åˆ°çš„æ—¶å€™æ‰å»åˆå§‹åŒ–ã€‚<br>ä¹Ÿå¯ä»¥ç†è§£æˆå»¶æ—¶åŠ è½½ã€‚<br>æˆ‘è§‰å¾—æœ€å¥½ä¹Ÿæœ€ç®€å•çš„ä¸€ä¸ªåˆ—å­å°±æ˜¯tableViewä¸­å›¾ç‰‡çš„åŠ è½½æ˜¾ç¤ºäº†ã€‚<br>ä¸€ä¸ªå»¶æ—¶è½½ï¼Œé¿å…å†…å­˜è¿‡é«˜ï¼Œä¸€ä¸ªå¼‚æ­¥åŠ è½½ï¼Œé¿å…çº¿ç¨‹å µå¡ã€‚</p>
<h2 id="è¿›é˜¶ç¯‡">è¿›é˜¶ç¯‡</h2><h3 id="@propertyä¸­æœ‰å“ªäº›å±æ€§å…³é”®å­—ï¼Ÿ">@propertyä¸­æœ‰å“ªäº›å±æ€§å…³é”®å­—ï¼Ÿ</h3><p>å±æ€§å¯ä»¥æ‹¥æœ‰çš„ç‰¹è´¨åˆ†ä¸ºå››ç±»:</p>
<ol>
<li>åŸå­æ€§â€”- nonatomic ç‰¹è´¨</li>
</ol>
<p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œç”±ç¼–è¯‘å™¨åˆæˆçš„æ–¹æ³•ä¼šé€šè¿‡é”å®šæœºåˆ¶ç¡®ä¿å…¶åŸå­æ€§(atomicity)ã€‚å¦‚æœå±æ€§å…·å¤‡ nonatomic ç‰¹è´¨ï¼Œåˆ™ä¸ä½¿ç”¨åŒæ­¥é”ã€‚è¯·æ³¨æ„ï¼Œå°½ç®¡æ²¡æœ‰åä¸ºâ€œatomicâ€çš„ç‰¹è´¨(å¦‚æœæŸå±æ€§ä¸å…·å¤‡ nonatomic ç‰¹è´¨ï¼Œé‚£å®ƒå°±æ˜¯â€œåŸå­çš„â€ ( atomic) )ï¼Œä½†æ˜¯ä»ç„¶å¯ä»¥åœ¨å±æ€§ç‰¹è´¨ä¸­å†™æ˜è¿™ä¸€ç‚¹ï¼Œç¼–è¯‘å™¨ä¸ä¼šæŠ¥é”™ã€‚è‹¥æ˜¯è‡ªå·±å®šä¹‰å­˜å–æ–¹æ³•ï¼Œé‚£ä¹ˆå°±åº”è¯¥éµä»ä¸å±æ€§ç‰¹è´¨ç›¸ç¬¦çš„åŸå­æ€§ã€‚</p>
<ol>
<li><p>è¯»/å†™æƒé™â€”-readwrite(è¯»å†™)ã€readonly (åªè¯»)</p>
</li>
<li><p>å†…å­˜ç®¡ç†è¯­ä¹‰â€”-assignã€strongã€ weakã€copy<br>æ–¹æ³•åâ€”-getter=<name> ã€setter=<name></name></name></p>
</li>
</ol>
<h3 id="ä½ ç»å¸¸ä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹åº“æœ‰å“ªäº›?">ä½ ç»å¸¸ä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹åº“æœ‰å“ªäº›?</h3><ol>
<li>AFNetworking</li>
<li>SDWebImage</li>
<li>FMDB</li>
<li>JSONKit</li>
<li>MJRefresh</li>
<li>MJExtension</li>
<li>Masonry</li>
<li>å‹ç›Ÿï¼ŒshareSDKç­‰ä¸‰æ–¹åº“ã€‚</li>
</ol>
<h3 id="ä½ ç»å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼æœ‰å“ªäº›ï¼Ÿ">ä½ ç»å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼æœ‰å“ªäº›ï¼Ÿ</h3><ol>
<li>MVC</li>
<li>ä»£ç†æ¨¡å¼</li>
<li>è§‚å¯Ÿè€…æ¨¡å¼</li>
<li>å•ä¾‹æ¨¡å¼</li>
<li>å·¥å‚æ¨¡å¼</li>
</ol>
<h3 id="æœ¬åœ°å­˜å‚¨æœ‰å“ªäº›æ–¹å¼ï¼Ÿ">æœ¬åœ°å­˜å‚¨æœ‰å“ªäº›æ–¹å¼ï¼Ÿ</h3><ol>
<li>å±æ€§åˆ—è¡¨ï¼ˆNSUserDefault æˆ–  plistï¼‰</li>
<li>å¯¹è±¡å½’æ¡£ ï¼ˆNSKeyedArchiverï¼‰</li>
<li>SQLite</li>
<li>CoreData</li>
</ol>
<h3 id="weakå±æ€§éœ€è¦åœ¨deallocä¸­ç½®nilä¹ˆï¼Ÿ">weakå±æ€§éœ€è¦åœ¨deallocä¸­ç½®nilä¹ˆï¼Ÿ</h3><p>ä¸éœ€è¦,åœ¨ARCç¯å¢ƒæ— è®ºæ˜¯å¼ºæŒ‡é’ˆè¿˜æ˜¯å¼±æŒ‡é’ˆéƒ½æ— éœ€åœ¨deallcoè®¾ç½®ä¸ºnil,ARCä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å¤„ç†ã€‚</p>
<h3 id="@synthesizeå’Œ@dynamicåˆ†åˆ«æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ">@synthesizeå’Œ@dynamicåˆ†åˆ«æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h3><ol>
<li>@propertyæœ‰ä¸¤ä¸ªå¯¹åº”çš„è¯ï¼Œä¸€ä¸ªæ˜¯@synthesizeï¼Œä¸€ä¸ªæ˜¯@dynamicã€‚å¦‚æœ@synthesizeå’Œ@dynamicéƒ½æ²¡å†™ï¼Œé‚£ä¹ˆé»˜è®¤çš„å°±æ˜¯@syntheszie var = _var;</li>
<li>@synthesizeçš„è¯­ä¹‰æ˜¯å¦‚æœä½ æ²¡æœ‰æ‰‹åŠ¨å®ç°setteræ–¹æ³•å’Œgetteræ–¹æ³•ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¸ºä½ åŠ ä¸Šè¿™ä¸¤ä¸ªæ–¹æ³•ã€‚</li>
<li>@dynamicå‘Šè¯‰ç¼–è¯‘å™¨,å±æ€§çš„setterä¸getteræ–¹æ³•ç”±ç”¨æˆ·è‡ªå·±å®ç°ï¼Œä¸è‡ªåŠ¨ç”Ÿæˆã€‚</li>
</ol>
<h3 id="ç”¨@propertyå£°æ˜çš„NSStringï¼ˆæˆ–NSArrayï¼ŒNSDictionaryï¼‰ç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿå¦‚æœæ”¹ç”¨strongå…³é”®å­—ï¼Œå¯èƒ½é€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ">ç”¨@propertyå£°æ˜çš„NSStringï¼ˆæˆ–NSArrayï¼ŒNSDictionaryï¼‰ç»å¸¸ä½¿ç”¨copyå…³é”®å­—ï¼Œä¸ºä»€ä¹ˆï¼Ÿå¦‚æœæ”¹ç”¨strongå…³é”®å­—ï¼Œå¯èƒ½é€ æˆä»€ä¹ˆé—®é¢˜ï¼Ÿ</h3><ol>
<li>å› ä¸ºçˆ¶ç±»æŒ‡é’ˆå¯ä»¥æŒ‡å‘å­ç±»å¯¹è±¡,ä½¿ç”¨copyçš„ç›®çš„æ˜¯ä¸ºäº†è®©æœ¬å¯¹è±¡çš„å±æ€§ä¸å—å¤–ç•Œå½±å“,ä½¿ç”¨copyæ— è®ºç»™æˆ‘ä¼ å…¥æ˜¯ä¸€ä¸ªå¯å˜å¯¹è±¡è¿˜æ˜¯ä¸å¯å¯¹è±¡,æˆ‘æœ¬èº«æŒæœ‰çš„å°±æ˜¯ä¸€ä¸ªä¸å¯å˜çš„å‰¯æœ¬.</li>
<li>å¦‚æœæˆ‘ä»¬ä½¿ç”¨æ˜¯strong,é‚£ä¹ˆè¿™ä¸ªå±æ€§å°±æœ‰å¯èƒ½æŒ‡å‘ä¸€ä¸ªå¯å˜å¯¹è±¡,å¦‚æœè¿™ä¸ªå¯å˜å¯¹è±¡åœ¨å¤–éƒ¨è¢«ä¿®æ”¹äº†,é‚£ä¹ˆä¼šå½±å“è¯¥å±æ€§.</li>
</ol>
<h3 id="ä»€ä¹ˆæ—¶å€™ä¼šæŠ¥unrecognized_selectorçš„å¼‚å¸¸ï¼Ÿ">ä»€ä¹ˆæ—¶å€™ä¼šæŠ¥unrecognized selectorçš„å¼‚å¸¸ï¼Ÿ</h3><p>å½“è¯¥å¯¹è±¡ä¸ŠæŸä¸ªæ–¹æ³•,è€Œè¯¥å¯¹è±¡ä¸Šæ²¡æœ‰å®ç°è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™</p>
<h3 id="ä½¿ç”¨blockæ—¶ä»€ä¹ˆæƒ…å†µä¼šå‘ç”Ÿå¼•ç”¨å¾ªç¯ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ">ä½¿ç”¨blockæ—¶ä»€ä¹ˆæƒ…å†µä¼šå‘ç”Ÿå¼•ç”¨å¾ªç¯ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ</h3><ol>
<li>åªè¦æ˜¯ä¸€ä¸ªå¯¹è±¡å¯¹è¯¥blockè¿›è¡Œäº†å¼ºå¼•ç”¨,åœ¨blockå†…éƒ¨æœ‰ç›´æ¥ä½¿ç”¨åˆ°è¯¥å¯¹è±¡ã€‚</li>
<li>è§£å†³æ–¹æ¡ˆï¼š__weak id weakSelf = self;  </li>
</ol>
<h3 id="ä½¿ç”¨ç³»ç»Ÿçš„æŸäº›block_apiï¼ˆå¦‚UIViewçš„blockç‰ˆæœ¬å†™åŠ¨ç”»æ—¶ï¼‰ï¼Œæ˜¯å¦ä¹Ÿè€ƒè™‘å¼•ç”¨å¾ªç¯é—®é¢˜ï¼Ÿ">ä½¿ç”¨ç³»ç»Ÿçš„æŸäº›block apiï¼ˆå¦‚UIViewçš„blockç‰ˆæœ¬å†™åŠ¨ç”»æ—¶ï¼‰ï¼Œæ˜¯å¦ä¹Ÿè€ƒè™‘å¼•ç”¨å¾ªç¯é—®é¢˜ï¼Ÿ</h3><p>ä¸€èˆ¬ä¸ç”¨è€ƒè™‘,å› ä¸ºå®˜æ–¹æ–‡æ¡£ä¸­æ²¡æœ‰å‘Šè¯‰æˆ‘ä»¬è¦æ³¨æ„å‘ç”Ÿå¼ºå¼•ç”¨,æ‰€ä»¥æ¨æµ‹ç³»ç»Ÿæ§ä»¶ä¸€èˆ¬æ²¡æœ‰å¯¹è¿™äº›blockè¿›è¡Œå¼ºå¼•ç”¨,æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¸ç”¨è€ƒè™‘å¾ªç¯å¼ºå¼•ç”¨çš„é—®é¢˜</p>
<h3 id="GCDçš„é˜Ÿåˆ—ï¼ˆdispatch_queue_tï¼‰åˆ†å“ªä¸¤ç§ç±»å‹ï¼Ÿ">GCDçš„é˜Ÿåˆ—ï¼ˆdispatch_queue_tï¼‰åˆ†å“ªä¸¤ç§ç±»å‹ï¼Ÿ</h3><p>ä¸²è¡Œé˜Ÿåˆ—å’Œå¹¶è¡Œé˜Ÿåˆ—</p>
<h3 id="å¦‚ä½•ç”¨GCDåŒæ­¥è‹¥å¹²ä¸ªå¼‚æ­¥è°ƒç”¨ï¼Ÿï¼ˆå¦‚æ ¹æ®è‹¥å¹²ä¸ªurlå¼‚æ­¥åŠ è½½å¤šå¼ å›¾ç‰‡ï¼Œç„¶ååœ¨éƒ½ä¸‹è½½å®Œæˆååˆæˆä¸€å¼ æ•´å›¾ï¼‰">å¦‚ä½•ç”¨GCDåŒæ­¥è‹¥å¹²ä¸ªå¼‚æ­¥è°ƒç”¨ï¼Ÿï¼ˆå¦‚æ ¹æ®è‹¥å¹²ä¸ªurlå¼‚æ­¥åŠ è½½å¤šå¼ å›¾ç‰‡ï¼Œç„¶ååœ¨éƒ½ä¸‹è½½å®Œæˆååˆæˆä¸€å¼ æ•´å›¾ï¼‰</h3><p>æ€»ä½“ä¸Šè¯´:  ä½¿ç”¨ dispatch groupï¼Œç„¶å wait forever ç­‰å¾…å®Œæˆï¼Œ æˆ–è€…é‡‡å– group notify æ¥é€šçŸ¥å›è°ƒã€‚</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dispatch_queue_t <span class="built_in">queue</span> <span class="subst">=</span> dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>);</span><br><span class="line">dispatch_group_t <span class="keyword">group</span> <span class="subst">=</span> dispatch_group_create();</span><br><span class="line">dispatch_group_async(<span class="keyword">group</span>, <span class="built_in">queue</span>, ^&#123; <span class="comment">/*åŠ è½½å›¾ç‰‡1 */</span> &#125;);</span><br><span class="line">dispatch_group_async(<span class="keyword">group</span>, <span class="built_in">queue</span>, ^&#123; <span class="comment">/*åŠ è½½å›¾ç‰‡2 */</span> &#125;);</span><br><span class="line">dispatch_group_async(<span class="keyword">group</span>, <span class="built_in">queue</span>, ^&#123; <span class="comment">/*åŠ è½½å›¾ç‰‡3 */</span> &#125;); </span><br><span class="line">dispatch_group_notify(<span class="keyword">group</span>, dispatch_get_main_queue(), ^&#123;</span><br><span class="line">        <span class="comment">// åˆå¹¶å›¾ç‰‡</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="ä»¥ä¸‹ä»£ç è¿è¡Œç»“æœå¦‚ä½•ï¼Ÿ">ä»¥ä¸‹ä»£ç è¿è¡Œç»“æœå¦‚ä½•ï¼Ÿ</h3><p>åªèƒ½è¾“å‡º1,ç„¶åçº¿ç¨‹ä¸»çº¿ç¨‹æ­»é”</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (void)viewDidLoad</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr_selector">[super viewDidLoad]</span>;</span><br><span class="line">    <span class="function">NSLog</span>(<span class="at_rule">@<span class="string">"1"</span>);</span></span><br><span class="line">    <span class="function">dispatch_sync</span>(<span class="function">dispatch_get_main_queue</span>(), ^&#123;</span><br><span class="line">        <span class="function">NSLog</span>(<span class="at_rule">@<span class="string">"2"</span>);</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="function">NSLog</span>(<span class="at_rule">@<span class="string">"3"</span>);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="è‹¥ä¸€ä¸ªç±»æœ‰å®ä¾‹å˜é‡NSString_*_fooï¼Œè°ƒç”¨setValue:forKey:æ—¶ï¼Œå¯ä»¥ä»¥fooè¿˜æ˜¯_fooä½œä¸ºkeyï¼Ÿ">è‹¥ä¸€ä¸ªç±»æœ‰å®ä¾‹å˜é‡NSString *_fooï¼Œè°ƒç”¨setValue:forKey:æ—¶ï¼Œå¯ä»¥ä»¥fooè¿˜æ˜¯_fooä½œä¸ºkeyï¼Ÿ</h3><p>éƒ½å¯ä»¥</p>
<h3 id="IBOutletè¿å‡ºæ¥çš„è§†å›¾å±æ€§ä¸ºä»€ä¹ˆå¯ä»¥è¢«è®¾ç½®æˆweak?">IBOutletè¿å‡ºæ¥çš„è§†å›¾å±æ€§ä¸ºä»€ä¹ˆå¯ä»¥è¢«è®¾ç½®æˆweak?</h3><p>å› ä¸ºè§†å›¾å·²ç»å¯¹å®ƒæœ‰ä¸€ä¸ªå¼ºå¼•ç”¨äº†</p>
<h3 id="ä½ å•ä¾‹æ€ä¹ˆç†è§£æ€ä¹ˆç”¨çš„?">ä½ å•ä¾‹æ€ä¹ˆç†è§£æ€ä¹ˆç”¨çš„?</h3><p>Singleton Patternå•ä¾‹è®¾è®¡æ¨¡å¼ï¼Œé€šè¿‡å•ä¾‹æ¨¡å¼å¯ä»¥ä¿è¯ç³»ç»Ÿä¸­ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹è€Œä¸”è¯¥å®ä¾‹æ˜“äºå¤–ç•Œè®¿é—®ï¼Œä»è€Œæ–¹ä¾¿å¯¹å®ä¾‹ä¸ªæ•°çš„æ§åˆ¶å¹¶èŠ‚çº¦ç³»ç»Ÿèµ„æºã€‚å¦‚æœå¸Œæœ›åœ¨ç³»ç»Ÿä¸­æŸä¸ªç±»çš„å¯¹è±¡åªèƒ½å­˜åœ¨ä¸€ä¸ªï¼Œå•ä¾‹æ¨¡å¼æ˜¯æœ€å¥½çš„è§£å†³æ–¹æ¡ˆã€‚ç±»åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œè€Œä¸”å¿…é¡»ä»ä¸€ä¸ªä¸ºäººç†ŸçŸ¥çš„è®¿é—®ç‚¹å¯¹å…¶è¿›è¡Œè®¿é—®ï¼Œæ¯”å¦‚å·¥å‚æ–¹æ³•ã€‚è¿™ä¸ªå”¯ä¸€çš„å®ä¾‹åªèƒ½é€šè¿‡å­ç±»åŒ–è¿›è¡Œæ‰©å±•ï¼Œè€Œä¸”æ‰©å±•çš„å¯¹è±¡ä¸ä¼šç ´åå®¢æˆ·ç«¯ä»£ç ã€‚ä¾‹å¦‚ï¼ŒUIApplicationçš„sharedApplicationæ–¹æ³•ï¼Œä»»ä½•æ—¶å€™éƒ½ä¼šè¿”å›ä¸€ä¸ªå½“å‰åº”ç”¨ç¨‹åºçš„UIApplicationå®ä¾‹ã€‚</p>
<h3 id="lldbï¼ˆgdbï¼‰å¸¸ç”¨çš„è°ƒè¯•å‘½ä»¤ï¼Ÿ">lldbï¼ˆgdbï¼‰å¸¸ç”¨çš„è°ƒè¯•å‘½ä»¤ï¼Ÿ</h3><p>æœ€å¸¸ç”¨å°±æ˜¯ : po å¯¹è±¡</p>
<h3 id="ä»€ä¹ˆæ˜¯è°“è¯ï¼Ÿ">ä»€ä¹ˆæ˜¯è°“è¯ï¼Ÿ</h3><p>è°“è¯æ˜¯é€šè¿‡NSPredicateï¼Œæ˜¯é€šè¿‡ç»™å®šçš„é€»è¾‘æ¡ä»¶ä½œä¸ºçº¦æŸæ¡ä»¶ï¼Œå®Œæˆå¯¹æ•°æ®çš„ç­›é€‰ã€‚</p>
<h3 id="+(void)load;_+(void)initialize;_çš„åŒºåˆ«ï¼Ÿ">+(void)load; +(void)initialize; çš„åŒºåˆ«ï¼Ÿ</h3><p>+(void)load; åœ¨ç¨‹åºè¿è¡Œåç«‹å³æ‰§è¡Œã€‚<br>+(void)initialize; åœ¨ç±»çš„æ–¹æ³•ç¬¬ä¸€æ¬¡è¢«è°ƒæ—¶æ‰§è¡Œ.</p>
<h3 id="ä»€ä¹ˆæ˜¯KVCï¼Œä»€ä¹ˆæ˜¯KVOï¼Ÿ">ä»€ä¹ˆæ˜¯KVCï¼Œä»€ä¹ˆæ˜¯KVOï¼Ÿ</h3><ol>
<li>kvc:é”® - å€¼ç¼–ç æ˜¯ä¸€ç§é—´æ¥è®¿é—®å¯¹è±¡çš„å±æ€§ä½¿ç”¨å­—ç¬¦ä¸²æ¥æ ‡è¯†å±æ€§ï¼Œè€Œä¸æ˜¯é€šè¿‡è°ƒç”¨å­˜å–æ–¹æ³•ï¼Œç›´æ¥æˆ–é€šè¿‡å®ä¾‹å˜é‡è®¿é—®çš„æœºåˆ¶ã€‚</li>
<li>kvo:é”®å€¼è§‚å¯Ÿæœºåˆ¶ï¼Œä»–æä¾›äº†è§‚å¯ŸæŸä¸€å±æ€§å˜åŒ–çš„æ–¹æ³•ï¼Œæå¤§çš„ç®€åŒ–äº†ä»£ç ã€‚</li>
</ol>
<h3 id="ä»€ä¹ˆæ—¶å€™ç”¨delegateï¼Œä»€ä¹ˆæ—¶å€™ç”¨Notificationï¼Ÿ">ä»€ä¹ˆæ—¶å€™ç”¨delegateï¼Œä»€ä¹ˆæ—¶å€™ç”¨Notificationï¼Ÿ</h3><p>delegateé’ˆå¯¹one-to-oneå…³ç³»ï¼Œå¹¶ä¸”recieverå¯ä»¥è¿”å›å€¼ ç»™senderï¼Œnotification å¯ä»¥é’ˆå¯¹one-to-one/many/none,recieveræ— æ³•è¿”å›å€¼ç»™sender.æ‰€ä»¥ï¼Œdelegateç”¨äºsenderå¸Œæœ›æ¥å—åˆ° recieverçš„æŸä¸ªåŠŸèƒ½åé¦ˆå€¼ï¼Œnotificationç”¨äºé€šçŸ¥å¤šä¸ªobjectæŸä¸ªäº‹ä»¶</p>
<h3 id="blockå’ŒweakåŒºåˆ«ï¼Ÿ"><strong>blockå’Œ</strong>weakåŒºåˆ«ï¼Ÿ</h3><ol>
<li>__blockä¸ç®¡æ˜¯ARCè¿˜æ˜¯MRCæ¨¡å¼ä¸‹éƒ½å¯ä»¥ä½¿ç”¨ï¼Œå¯ä»¥ä¿®é¥°å¯¹è±¡ï¼Œè¿˜å¯ä»¥ä¿®é¥°åŸºæœ¬æ•°æ®ç±»å‹ã€‚ </li>
<li>__weakåªèƒ½åœ¨ARCæ¨¡å¼ä¸‹ä½¿ç”¨ï¼Œä¹Ÿåªèƒ½ä¿®é¥°å¯¹è±¡ï¼ˆNSStringï¼‰ï¼Œä¸èƒ½ä¿®é¥°åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆintï¼‰ã€‚ </li>
<li><strong>blockå¯¹è±¡å¯ä»¥åœ¨blockä¸­è¢«é‡æ–°èµ‹å€¼ï¼Œ</strong>weakä¸å¯ä»¥ã€‚</li>
</ol>
<h3 id="frameå’Œboundsæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ">frameå’Œboundsæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</h3><p>frameæŒ‡çš„æ˜¯ï¼šè¯¥viewåœ¨çˆ¶viewåæ ‡ç³»ç»Ÿä¸­çš„ä½ç½®å’Œå¤§å°ã€‚ï¼ˆå‚ç…§ç‚¹æ˜¯çˆ¶äº²çš„åæ ‡ç³»ç»Ÿï¼‰boundsæŒ‡çš„æ˜¯ï¼šè¯¥viewåœ¨æœ¬èº«åæ ‡ç³»ç»Ÿä¸­ çš„ä½ç½®å’Œå¤§å°ã€‚ï¼ˆå‚ç…§ç‚¹æ˜¯æœ¬èº«åæ ‡ç³»ç»Ÿï¼‰</p>
<h3 id="UIViewå’ŒCALayeræœ‰ä»€ä¹ˆä¸åŒï¼Ÿ">UIViewå’ŒCALayeræœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</h3><p>ä¸¤è€…æœ€å¤§çš„åŒºåˆ«æ˜¯,å›¾å±‚ä¸ä¼šç›´æ¥æ¸²æŸ“åˆ°å±å¹•ä¸Šï¼ŒUIViewæ˜¯iOSç³»ç»Ÿä¸­ç•Œé¢å…ƒç´ çš„åŸºç¡€ï¼Œæ‰€æœ‰çš„ç•Œé¢å…ƒç´ éƒ½æ˜¯ç»§æ‰¿è‡ªå®ƒã€‚å®ƒæœ¬èº«å®Œå…¨æ˜¯ç”±CoreAnimationæ¥å®ç°çš„ã€‚å®ƒçœŸæ­£çš„ç»˜å›¾éƒ¨åˆ†ï¼Œæ˜¯ç”±ä¸€ä¸ªCALayerç±»æ¥ç®¡ç†ã€‚UIViewæœ¬èº«æ›´åƒæ˜¯ä¸€ä¸ªCALayerçš„ç®¡ç†å™¨ã€‚ä¸€ä¸ªUIViewä¸Šå¯ä»¥æœ‰nä¸ªCALayerï¼Œæ¯ä¸ªlayeræ˜¾ç¤ºä¸€ç§ä¸œè¥¿ï¼Œå¢å¼ºUIViewçš„å±•ç°èƒ½åŠ›ã€‚</p>
<h3 id="TCPå’ŒUDPçš„åŒºåˆ«ï¼Ÿ">TCPå’ŒUDPçš„åŒºåˆ«ï¼Ÿ</h3><ol>
<li>TCPï¼šï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼‰ï¼Œæä¾›é¢å‘è¿æ¥çš„ã€å¯é åœ°ç‚¹å¯¹ç‚¹çš„é€šä¿¡ï¼›</li>
<li>UDPï¼šï¼ˆç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰ï¼Œæä¾›éè¿æ¥çš„ä¸å¯é çš„ç‚¹å¯¹å¤šç‚¹çš„é€šä¿¡ï¼›</li>
<li>å®é™…è¿ç”¨ä¸­ï¼Œçœ‹ç¨‹åºæ³¨é‡çš„æ˜¯å“ªä¸€æ–¹é¢ï¼Œæ˜¯å¯é è¿˜æ˜¯å¿«é€Ÿï¼›</li>
</ol>
<h3 id="socketè¿æ¥ä¸httpè¿æ¥">socketè¿æ¥ä¸httpè¿æ¥</h3><ol>
<li>httpè¿æ¥ï¼šçŸ­è¿æ¥ã€‚å³å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ä¸€æ¬¡è¯·æ±‚ï¼ŒæœåŠ¡ç«¯å“åº”ä¹‹åï¼Œé“¾æ¥å³ä¼šæ–­æ‰ï¼›</li>
<li>socketè¿æ¥ï¼šé•¿è¿æ¥ã€‚å³å®¢æˆ·ç«¯ä¸€æ—¦ä¸æœåŠ¡å™¨å»ºç«‹æ¥è¿ï¼Œä¾¿ä¸ä¼šä¸»åŠ¨æ–­æ‰ã€‚</li>
</ol>
<h3 id="HTTP_çš„postä¸getåŒºåˆ«ä¸è”ç³»ï¼Œå®è·µä¸­å¦‚ä½•é€‰æ‹©å®ƒä»¬?">HTTP çš„postä¸getåŒºåˆ«ä¸è”ç³»ï¼Œå®è·µä¸­å¦‚ä½•é€‰æ‹©å®ƒä»¬?</h3><ol>
<li>getæ˜¯ä»æœåŠ¡å™¨ä¸Šè·å–æ•°æ®ï¼Œpostæ˜¯å‘æœåŠ¡å™¨ä¼ é€æ•°æ®ã€‚</li>
<li>åœ¨å®¢æˆ·ç«¯ï¼ŒGetæ–¹å¼åœ¨é€šè¿‡URLæäº¤æ•°æ®ï¼Œæ•°æ®åœ¨URLä¸­å¯ä»¥çœ‹åˆ°ï¼›POSTæ–¹å¼ï¼Œæ•°æ®æ”¾ç½®åœ¨HTML HEADERå†…æäº¤ã€‚</li>
<li>å¯¹äºgetæ–¹å¼ï¼ŒæœåŠ¡å™¨ç«¯ç”¨Request.QueryStringè·å–å˜é‡çš„å€¼ï¼Œå¯¹äºpostæ–¹å¼ï¼ŒæœåŠ¡å™¨ç«¯ç”¨Request.Formè·å–æäº¤çš„æ•°æ®ã€‚</li>
<li>GETæ–¹å¼æäº¤çš„æ•°æ®æœ€å¤šåªèƒ½æœ‰1024å­—èŠ‚ï¼Œè€ŒPOSTåˆ™æ²¡æœ‰æ­¤é™åˆ¶ã€‚</li>
<li>å®‰å…¨æ€§é—®é¢˜ã€‚æ­£å¦‚åœ¨ï¼ˆ1ï¼‰ä¸­æåˆ°ï¼Œä½¿ç”¨ Get çš„æ—¶å€™ï¼Œå‚æ•°ä¼šæ˜¾ç¤ºåœ¨åœ°å€æ ä¸Šï¼Œè€Œ Post ä¸ä¼šã€‚æ‰€ä»¥ï¼Œå¦‚æœè¿™äº›æ•°æ®æ˜¯ä¸­æ–‡æ•°æ®è€Œä¸”æ˜¯éæ•æ„Ÿæ•°æ®ï¼Œé‚£ä¹ˆä½¿ç”¨ getï¼›å¦‚æœç”¨æˆ·è¾“å…¥çš„æ•°æ®ä¸æ˜¯ä¸­æ–‡å­—ç¬¦è€Œä¸”åŒ…å«æ•æ„Ÿæ•°æ®ï¼Œé‚£ä¹ˆè¿˜æ˜¯ä½¿ç”¨ postä¸ºå¥½ã€‚<br>Httpå®šä¹‰äº†ä¸æœåŠ¡å™¨äº¤äº’çš„ä¸åŒæ–¹æ³•ï¼Œæœ€åŸºæœ¬çš„æ–¹æ³•æœ‰4ç§ï¼Œåˆ†åˆ«æ˜¯GETï¼ŒPOSTï¼ŒPUTï¼ŒDELETEã€‚URLå…¨ç§°æ˜¯èµ„æºæè¿°ç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·è®¤ä¸ºï¼šä¸€ä¸ªURLåœ°å€ï¼Œå®ƒç”¨äºæè¿°ä¸€ä¸ªç½‘ç»œä¸Šçš„èµ„æºï¼Œè€ŒHTTPä¸­çš„GETï¼ŒPOSTï¼ŒPUTï¼ŒDELETEå°±å¯¹åº”ç€å¯¹è¿™ä¸ªèµ„æºçš„æŸ¥ï¼Œæ”¹ï¼Œå¢ï¼Œåˆ 4ä¸ªæ“ä½œã€‚GETä¸€èˆ¬ç”¨äºè·å–/æŸ¥è¯¢èµ„æºä¿¡æ¯ï¼Œè€ŒPOSTä¸€èˆ¬ç”¨äºæ›´æ–°èµ„æºä¿¡æ¯ã€‚</li>
</ol>
<h3 id="æ£€æŸ¥å†…å­˜ç®¡ç†é—®é¢˜çš„æ–¹å¼æœ‰å“ªäº›">æ£€æŸ¥å†…å­˜ç®¡ç†é—®é¢˜çš„æ–¹å¼æœ‰å“ªäº›</h3><ol>
<li>ç‚¹å‡»Xcodeé¡¶éƒ¨èœå•ä¸­çš„ProductÃ Analyzeã€‚è¿™ç§æ–¹æ³•ä¸»è¦å¯ä»¥æŸ¥çœ‹å†…å­˜æ³„éœ²ï¼Œå˜é‡æœªåˆå§‹åŒ–ï¼Œå˜é‡å®šä¹‰åæ²¡æœ‰è¢«ä½¿ç”¨åˆ°</li>
<li>ä½¿ç”¨Instrumentå·¥å…·æ£€æŸ¥ã€‚ç‚¹å‡»Xcodeé¡¶éƒ¨èœå•ä¸­çš„Product Profileï¼Œå¼¹å‡ºä¸€ä¸ªç•Œé¢ï¼Œé€‰æ‹©å·¦ä¾§çš„Memoryåï¼Œå†é€‰å³ä¾§çš„Leaksã€‚</li>
<li>äººå·¥æ£€æŸ¥</li>
</ol>
<h3 id="è°ˆå®‰å“ä¸è‹¹æœçš„ä¼˜ç¼ºç‚¹">è°ˆå®‰å“ä¸è‹¹æœçš„ä¼˜ç¼ºç‚¹</h3><p>è‹¹æœç³»ç»Ÿä¼˜ç‚¹æ˜¯å·¦å³æµç•…ï¼Œè½¯ä»¶å¤šï¼Œç•Œé¢åä¸½ï¼Œå›¾æ ‡ç»Ÿä¸€ï¼Œå¾ˆç¾è§‚ï¼›ç¼ºç‚¹æ˜¯ç³»ç»Ÿå°é—­ï¼Œä¸å…è®¸ç”¨æˆ·è¿‡å¤šçš„ä¸ªæ€§åŒ–è®¾ç½®ï¼Œè€Œä¸”åªèƒ½åœ¨è‹¹æœæ‰‹æœºä¸Šç”¨ã€‚å®‰å“ç³»ç»Ÿä¼˜ç‚¹æ˜¯å¼€æ”¾ï¼Œå¯ä»¥è‡ªå·±æ‰©å±•çš„ä¸œè¥¿å¾ˆå¤šï¼Œæ”¯æŒçš„ç¡¬ä»¶ä¹Ÿå¤šï¼Œå„ä¸ªä»·ä½çš„æ‰‹æœºéƒ½æœ‰ï¼›ç¼ºç‚¹å°±æ˜¯è½¯ä»¶å¤ªæ‚ä¹±ï¼Œå…¼å®¹æ€§æœ‰é—®é¢˜ï¼Œå›¾æ ‡æ··ä¹±ä¸ç¾è§‚ã€‚iOSçš„ç¡®æ¯”androidæµç•…ï¼Œè¿™ä»…ä»…ä½“ç°åœ¨è¾ƒå¤§è½¯ä»¶åˆ‡æ¢æ—¶ï¼Œå…¶ä»–å·®ä¸å¤šæµç•…ï¼ŒiOSå¹¶ä¸èƒ½åšåˆ°å®Œå…¨åå°ï¼Œå¦‚æœå®ƒå®Œå…¨åå°ä¼°è®¡ä¹Ÿä¸ä¼šæ¯”å®‰å“æµç•…å¤šå°‘ã€‚åä¹‹ï¼Œå¦‚æœå®‰å“åªæ˜¯æ³¨é‡å•ä¸ªè¿è¡Œï¼Œæµç•…åº¦ä¹Ÿä¼šå¤§å¤§æå‡ï¼ŒiOSç³»ç»Ÿæ›´æ–°æ²¡æœ‰androidé‚£ä¹ˆé¢‘ç¹ï¼Œçˆ±ä½“éªŒçš„äººä¼šé€‰å®‰å“ï¼Œé‚£äº›æ€•çƒ¦çš„ä¼šé€‰iOSã€‚iOSçš„ç¡¬ä»¶éœ€æ±‚é€‰ä¸åŠandroidï¼Œä»¥è‡³äºandroidæœºä¼šç›¸å¯¹iOSè¾ƒçƒ­ï¼Œè¾ƒè´¹ç”µé¢ã€‚</p>
<h2 id="å¤§ç¥ç¯‡">å¤§ç¥ç¯‡</h2><h3 id="è¿è¡Œæ—¶ä½ æ˜¯æ€ä¹ˆç†è§£çš„?">è¿è¡Œæ—¶ä½ æ˜¯æ€ä¹ˆç†è§£çš„?</h3><p>ObjC Runtime å…¶å®æ˜¯ä¸€ä¸ª Runtime åº“ï¼ŒåŸºæœ¬ä¸Šç”¨ C å’Œæ±‡ç¼–å†™çš„ï¼Œè¿™ä¸ªåº“ä½¿å¾— C è¯­è¨€æœ‰äº†é¢å‘å¯¹è±¡çš„èƒ½åŠ›ï¼ˆè„‘ä¸­æµ®ç°å½“ä½ ä¹”å¸®ä¸»å‚è§‚äº†æ–½ä¹å¸•å…‹çš„ SmallTalk ä¹‹åå˜´è§’ä¸€æŠ¹æµ…ç¬‘ï¼‰ã€‚è¿™ä¸ªåº“åšçš„äº‹å‰å°±æ˜¯åŠ è½½ç±»çš„ä¿¡æ¯ï¼Œè¿›è¡Œæ–¹æ³•çš„åˆ†å‘å’Œè½¬å‘ä¹‹ç±»çš„ã€‚OCæ˜¯ä¸€ç§é¢å‘runtime(è¿è¡Œæ—¶)çš„è¯­è¨€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä¼šå°½å¯èƒ½åœ°æŠŠä»£ç æ‰§è¡Œçš„å†³ç­–ä»ç¼–è¯‘å’Œé“¾æ¥çš„æ—¶å€™ï¼Œæ¨è¿Ÿåˆ°è¿è¡Œæ—¶ã€‚è¿™ç»™ç¨‹åºå‘˜å†™ä»£ç å¸¦æ¥å¾ˆå¤§çš„çµæ´»æ€§ï¼Œæ¯”å¦‚è¯´ä½ å¯ä»¥æŠŠæ¶ˆæ¯è½¬å‘ç»™ä½ æƒ³è¦çš„å¯¹è±¡ï¼Œæˆ–è€…éšæ„äº¤æ¢ä¸€ä¸ªæ–¹æ³•çš„å®ç°ä¹‹ç±»çš„ã€‚è¿™å°±è¦æ±‚runtimeèƒ½æ£€æµ‹ä¸€ä¸ªå¯¹è±¡æ˜¯å¦èƒ½å¯¹ä¸€ä¸ªæ–¹æ³•è¿›è¡Œå“åº”ï¼Œç„¶åå†æŠŠè¿™ä¸ªæ–¹æ³•åˆ†å‘åˆ°å¯¹åº”çš„å¯¹è±¡å»ã€‚</p>
<h3 id="@protocol_å’Œ_category_ä¸­å¦‚ä½•ä½¿ç”¨_@property">@protocol å’Œ category ä¸­å¦‚ä½•ä½¿ç”¨ @property</h3><ol>
<li>åœ¨ protocol ä¸­ä½¿ç”¨ property åªä¼šç”Ÿæˆ setter å’Œ getter æ–¹æ³•å£°æ˜,æˆ‘ä»¬ä½¿ç”¨å±æ€§çš„ç›®çš„,æ˜¯å¸Œæœ›éµå®ˆæˆ‘åè®®çš„å¯¹è±¡èƒ½å®ç°è¯¥å±æ€§</li>
<li>category ä½¿ç”¨ @property ä¹Ÿæ˜¯åªä¼šç”Ÿæˆ setter å’Œ getter æ–¹æ³•çš„å£°æ˜,å¦‚æœæˆ‘ä»¬çœŸçš„éœ€è¦ç»™ category å¢åŠ å±æ€§çš„å®ç°,éœ€è¦å€ŸåŠ©äºè¿è¡Œæ—¶çš„ä¸¤ä¸ªå‡½æ•°ï¼š</li>
</ol>
<ul>
<li>objc_setAssociatedObject</li>
<li>objc_getAssociatedObject</li>
</ul>
<h3 id="runtimeå¦‚ä½•é€šè¿‡selectoræ‰¾åˆ°å¯¹åº”çš„IMPåœ°å€ï¼Ÿ">runtimeå¦‚ä½•é€šè¿‡selectoræ‰¾åˆ°å¯¹åº”çš„IMPåœ°å€ï¼Ÿ</h3><p>æ¯ä¸€ä¸ªç±»å¯¹è±¡ä¸­éƒ½ä¸€ä¸ªæ–¹æ³•åˆ—è¡¨,æ–¹æ³•åˆ—è¡¨ä¸­è®°å½•ç€æ–¹æ³•çš„åç§°,æ–¹æ³•å®ç°,ä»¥åŠå‚æ•°ç±»å‹,å…¶å®selectoræœ¬è´¨å°±æ˜¯æ–¹æ³•åç§°,é€šè¿‡è¿™ä¸ªæ–¹æ³•åç§°å°±å¯ä»¥åœ¨æ–¹æ³•åˆ—è¡¨ä¸­æ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•å®ç°.</p>
<h3 id="ä¸€ä¸ªobjcå¯¹è±¡å¦‚ä½•è¿›è¡Œå†…å­˜å¸ƒå±€ï¼Ÿ">ä¸€ä¸ªobjcå¯¹è±¡å¦‚ä½•è¿›è¡Œå†…å­˜å¸ƒå±€ï¼Ÿ</h3><ol>
<li>æ‰€æœ‰çˆ¶ç±»çš„æˆå‘˜å˜é‡å’Œè‡ªå·±çš„æˆå‘˜å˜é‡éƒ½ä¼šå­˜æ”¾åœ¨è¯¥å¯¹è±¡æ‰€å¯¹åº”çš„å­˜å‚¨ç©ºé—´ä¸­.</li>
<li>æ¯ä¸€ä¸ªå¯¹è±¡å†…éƒ¨éƒ½æœ‰ä¸€ä¸ªisaæŒ‡é’ˆ,æŒ‡å‘ä»–çš„ç±»å¯¹è±¡,ç±»å¯¹è±¡ä¸­å­˜æ”¾ç€æœ¬å¯¹è±¡çš„</li>
</ol>
<ul>
<li>å¯¹è±¡æ–¹æ³•åˆ—è¡¨ï¼ˆå¯¹è±¡èƒ½å¤Ÿæ¥æ”¶çš„æ¶ˆæ¯åˆ—è¡¨ï¼Œä¿å­˜åœ¨å®ƒæ‰€å¯¹åº”çš„ç±»å¯¹è±¡ä¸­ï¼‰</li>
<li>æˆå‘˜å˜é‡çš„åˆ—è¡¨,</li>
<li>å±æ€§åˆ—è¡¨,</li>
</ul>
<p>å®ƒå†…éƒ¨ä¹Ÿæœ‰ä¸€ä¸ªisaæŒ‡é’ˆæŒ‡å‘å…ƒå¯¹è±¡(meta class),å…ƒå¯¹è±¡å†…éƒ¨å­˜æ”¾çš„æ˜¯ç±»æ–¹æ³•åˆ—è¡¨,ç±»å¯¹è±¡å†…éƒ¨è¿˜æœ‰ä¸€ä¸ªsuperclassçš„æŒ‡é’ˆ,æŒ‡å‘ä»–çš„çˆ¶ç±»å¯¹è±¡ã€‚</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://lyjh.net/2015/10/10/ç®€å†æ•´ç†/" data-id="cihpmvh73000bq0wq99rw2w38" class="article-share-link" data-share="baidu">åˆ†äº«åˆ°</a>
      

      
        <a href="http://lyjh.net/2015/10/10/ç®€å†æ•´ç†/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/é¢è¯•é¢˜/">é¢è¯•é¢˜</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-iOSå¤šçº¿ç¨‹GCDè¯¦è§£" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/09/27/iOSå¤šçº¿ç¨‹GCDè¯¦è§£/" class="article-date">
  <time datetime="2015-09-27T08:04:55.000Z" itemprop="datePublished">2015-09-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOSæ•™ç¨‹/">iOSæ•™ç¨‹</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/27/iOSå¤šçº¿ç¨‹GCDè¯¦è§£/">iOSå¤šçº¿ç¨‹GCDè¯¦è§£</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>æˆ‘ä»¬åœ¨è¿™é‡Œå¤ä¹ ä¸‹GCDã€‚</p>
<h3 id="1-ä»€ä¹ˆæ˜¯GCDï¼Ÿ">1.ä»€ä¹ˆæ˜¯GCDï¼Ÿ</h3><p>GCDå…¨ç§°Grand Central Dispatchï¼Œæˆ‘ä»¬é€šä¿—çš„ç¿»è¯‘å«ç‰›é€¼çš„ä¸­å¿ƒè°ƒåº¦ã€‚</p>
<h3 id="2-æˆ‘ä»¬ç”¨GCDå¹²ä»€ä¹ˆï¼Ÿ">2.æˆ‘ä»¬ç”¨GCDå¹²ä»€ä¹ˆï¼Ÿ</h3><p>é€šè¿‡ GCDï¼Œå¼€å‘è€…ä¸ç”¨å†ç›´æ¥è·Ÿçº¿ç¨‹æ‰“äº¤é“äº†ï¼Œåªéœ€è¦å‘é˜Ÿåˆ—ä¸­æ·»åŠ ä»£ç å—å³å¯ï¼ŒGCD åœ¨åç«¯ç®¡ç†ç€ä¸€ä¸ªçº¿ç¨‹æ± ã€‚GCD ä¸ä»…å†³å®šç€ä½ çš„ä»£ç å—å°†åœ¨å“ªä¸ªçº¿ç¨‹è¢«æ‰§è¡Œï¼Œå®ƒè¿˜æ ¹æ®å¯ç”¨çš„ç³»ç»Ÿèµ„æºå¯¹è¿™äº›çº¿ç¨‹è¿›è¡Œç®¡ç†ã€‚è¿™æ ·å¯ä»¥å°†å¼€å‘è€…ä»çº¿ç¨‹ç®¡ç†çš„å·¥ä½œä¸­è§£æ”¾å‡ºæ¥ï¼Œé€šè¿‡é›†ä¸­çš„ç®¡ç†çº¿ç¨‹ï¼Œæ¥ç¼“è§£å¤§é‡çº¿ç¨‹è¢«åˆ›å»ºçš„é—®é¢˜ã€‚</p>
<p>GCD å¸¦æ¥çš„å¦ä¸€ä¸ªé‡è¦æ”¹å˜æ˜¯ï¼Œä½œä¸ºå¼€å‘è€…å¯ä»¥å°†å·¥ä½œè€ƒè™‘ä¸ºä¸€ä¸ªé˜Ÿåˆ—ï¼Œè€Œä¸æ˜¯ä¸€å †çº¿ç¨‹ï¼Œè¿™ç§å¹¶è¡Œçš„æŠ½è±¡æ¨¡å‹æ›´å®¹æ˜“æŒæ¡å’Œä½¿ç”¨ã€‚</p>
<p>é¦–å…ˆï¼Œç³»ç»Ÿæä¾›ç»™ä½ ä¸€ä¸ªå«åš ä¸»é˜Ÿåˆ—ï¼ˆmain queueï¼‰ çš„ç‰¹æ®Šé˜Ÿåˆ—ã€‚å’Œå…¶å®ƒä¸²è¡Œé˜Ÿåˆ—ä¸€æ ·ï¼Œè¿™ä¸ªé˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ä¸€æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªã€‚ç„¶è€Œï¼Œå®ƒèƒ½ä¿è¯æ‰€æœ‰çš„ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œè€Œä¸»çº¿ç¨‹æ˜¯å”¯ä¸€å¯ç”¨äºæ›´æ–° UI çš„çº¿ç¨‹ã€‚è¿™ä¸ªé˜Ÿåˆ—å°±æ˜¯ç”¨äºå‘ç”Ÿæ¶ˆæ¯ç»™ UIView æˆ–å‘é€é€šçŸ¥çš„ã€‚</p>
<p>ç³»ç»ŸåŒæ—¶æä¾›ç»™ä½ å¥½å‡ ä¸ªå¹¶å‘é˜Ÿåˆ—ã€‚å®ƒä»¬å«åš å…¨å±€è°ƒåº¦é˜Ÿåˆ—ï¼ˆGlobal Dispatch Queuesï¼‰ ã€‚ç›®å‰çš„å››ä¸ªå…¨å±€é˜Ÿåˆ—æœ‰ç€ä¸åŒçš„ä¼˜å…ˆçº§ï¼šbackgroundã€lowã€default ä»¥åŠ highã€‚è¦çŸ¥é“ï¼ŒApple çš„ API ä¹Ÿä¼šä½¿ç”¨è¿™äº›é˜Ÿåˆ—ï¼Œæ‰€ä»¥ä½ æ·»åŠ çš„ä»»ä½•ä»»åŠ¡éƒ½ä¸ä¼šæ˜¯è¿™äº›é˜Ÿåˆ—ä¸­å”¯ä¸€çš„ä»»åŠ¡ã€‚</p>
<p>æœ€åï¼Œä½ ä¹Ÿå¯ä»¥åˆ›å»ºè‡ªå·±çš„ä¸²è¡Œé˜Ÿåˆ—æˆ–å¹¶å‘é˜Ÿåˆ—ã€‚è¿™å°±æ˜¯è¯´ï¼Œè‡³å°‘æœ‰äº”ä¸ªé˜Ÿåˆ—ä»»ä½ å¤„ç½®ï¼šä¸»é˜Ÿåˆ—ã€å››ä¸ªå…¨å±€è°ƒåº¦é˜Ÿåˆ—ï¼Œå†åŠ ä¸Šä»»ä½•ä½ è‡ªå·±åˆ›å»ºçš„é˜Ÿåˆ—ã€‚</p>
<h3 id="3-GCDç›¸æ¯”å…¶ä»–å¤šçº¿ç¨‹æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ">3.GCDç›¸æ¯”å…¶ä»–å¤šçº¿ç¨‹æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ</h3><ul>
<li>GCD èƒ½é€šè¿‡æ¨è¿Ÿæ˜‚è´µè®¡ç®—ä»»åŠ¡å¹¶åœ¨åå°è¿è¡Œå®ƒä»¬æ¥æ”¹å–„ä½ çš„åº”ç”¨çš„å“åº”æ€§èƒ½ã€‚</li>
<li>GCD æä¾›ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„å¹¶å‘æ¨¡å‹è€Œä¸ä»…ä»…åªæ˜¯é”å’Œçº¿ç¨‹ï¼Œä»¥å¸®åŠ©æˆ‘ä»¬é¿å¼€å¹¶å‘é™·é˜±ã€‚</li>
<li>GCD å…·æœ‰åœ¨å¸¸è§æ¨¡å¼ï¼ˆä¾‹å¦‚å•ä¾‹ï¼‰ä¸Šç”¨æ›´é«˜æ€§èƒ½çš„åŸè¯­ä¼˜åŒ–ä½ çš„ä»£ç çš„æ½œåœ¨èƒ½åŠ›ã€‚</li>
<li>GCD ä¼šè‡ªåŠ¨åˆ©ç”¨æ›´å¤šçš„CPUå†…æ ¸ï¼ˆæ¯”å¦‚åŒæ ¸ã€å››æ ¸ï¼‰</li>
</ul>
<h3 id="4-GCDæœ¯è¯­">4.GCDæœ¯è¯­</h3><ul>
<li>ä¸²è¡Œï¼ˆSerialï¼‰ï¼šè®©ä»»åŠ¡ä¸€ä¸ªæ¥ç€ä¸€ä¸ªåœ°æ‰§è¡Œï¼ˆä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œå†æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼‰</li>
<li>å¹¶å‘ï¼ˆConcurrentï¼‰ï¼šå¯ä»¥è®©å¤šä¸ªä»»åŠ¡å¹¶å‘ï¼ˆåŒæ—¶ï¼‰æ‰§è¡Œï¼ˆè‡ªåŠ¨å¼€å¯å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œä»»åŠ¡ï¼‰å¹¶å‘åŠŸèƒ½åªæœ‰åœ¨å¼‚æ­¥ï¼ˆdispatch_asyncï¼‰å‡½æ•°ä¸‹æ‰æœ‰æ•ˆã€‚</li>
<li>åŒæ­¥ï¼ˆSynchronousï¼‰ï¼šåœ¨å½“å‰çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼Œä¸å…·å¤‡å¼€å¯æ–°çº¿ç¨‹çš„èƒ½åŠ›</li>
<li>å¼‚æ­¥ï¼ˆAsynchronousï¼‰ï¼šåœ¨æ–°çš„çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼Œå…·å¤‡å¼€å¯æ–°çº¿ç¨‹çš„èƒ½åŠ›</li>
</ul>
<h3 id="5-ä½¿ç”¨GCD">5.ä½¿ç”¨GCD</h3><p>1.è®¤è¯†ä¸»é˜Ÿåˆ—ï¼Œæ„Ÿå—ä¸²è¡Œé˜Ÿåˆ—çš„è¿è¡Œ,è¿è¡Œç»“æœæ‰“å°çš„æ˜¯ 1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œé¡ºåºæ‰§è¡Œã€‚</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">dispatch_queue_t mainQueue = dispatch_get_main_queue<span class="list">()</span><span class="comment">;</span></span><br><span class="line">dispatch_async<span class="list">(<span class="keyword">mainQueue</span>, ^&#123;</span><br><span class="line">    NSLog<span class="list">(@<span class="string">"1"</span>)</span><span class="comment">;</span></span><br><span class="line">&#125;)</span><span class="comment">;</span></span><br><span class="line">dispatch_async<span class="list">(<span class="keyword">mainQueue</span>, ^&#123;</span><br><span class="line">    NSLog<span class="list">(@<span class="string">"2"</span>)</span><span class="comment">;</span></span><br><span class="line">&#125;)</span><span class="comment">;</span></span><br><span class="line">dispatch_async<span class="list">(<span class="keyword">mainQueue</span>, ^&#123;</span><br><span class="line">    NSLog<span class="list">(@<span class="string">"3"</span>)</span><span class="comment">;</span></span><br><span class="line">&#125;)</span><span class="comment">;</span></span><br><span class="line">dispatch_async<span class="list">(<span class="keyword">mainQueue</span>, ^&#123;</span><br><span class="line">    NSLog<span class="list">(@<span class="string">"4"</span>)</span><span class="comment">;</span></span><br><span class="line">&#125;)</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>2.è®¤è¯†å…¨å±€é˜Ÿåˆ—ï¼Œä½“éªŒå¹¶å‘é˜Ÿåˆ—çš„è¿è¡Œï¼Œè¿è¡Œç»“æœéšæœºæ‰“å°ï¼š2ï¼Œ3ï¼Œ1ï¼Œ4ï¼Œéšæœºæ‰§è¡Œã€‚</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">dispatch_queue_t defaultQueue = dispatch_get_global_queue<span class="list">(<span class="keyword">DISPATCH_QUEUE_PRIORITY_DEFAULT</span>, <span class="number">0</span>)</span><span class="comment">;</span></span><br><span class="line">dispatch_async<span class="list">(<span class="keyword">defaultQueue</span>, ^&#123;</span><br><span class="line">    NSLog<span class="list">(@<span class="string">"1"</span>)</span><span class="comment">;</span></span><br><span class="line">&#125;)</span><span class="comment">;</span></span><br><span class="line">dispatch_async<span class="list">(<span class="keyword">defaultQueue</span>, ^&#123;</span><br><span class="line">    NSLog<span class="list">(@<span class="string">"2"</span>)</span><span class="comment">;</span></span><br><span class="line">&#125;)</span><span class="comment">;</span></span><br><span class="line">dispatch_async<span class="list">(<span class="keyword">defaultQueue</span>, ^&#123;</span><br><span class="line">    NSLog<span class="list">(@<span class="string">"3"</span>)</span><span class="comment">;</span></span><br><span class="line">&#125;)</span><span class="comment">;</span></span><br><span class="line">dispatch_async<span class="list">(<span class="keyword">defaultQueue</span>, ^&#123;</span><br><span class="line">    NSLog<span class="list">(@<span class="string">"4"</span>)</span><span class="comment">;</span></span><br><span class="line">&#125;)</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>3.åˆ›å»ºè‡ªå®šä¹‰é˜Ÿåˆ— </p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">dispatch_queue_t concurrentQueue = dispatch_queue_create<span class="list">(<span class="string">"com.bjsxt.concurrentQueue"</span>, DISPATCH_QUEUE_CONCURRENT)</span><span class="comment">;</span></span><br><span class="line">    </span><br><span class="line">dispatch_async<span class="list">(<span class="keyword">concurrentQueue</span>, ^&#123;</span><br><span class="line">    NSLog<span class="list">(@<span class="string">"4"</span>)</span><span class="comment">;</span></span><br><span class="line">    dispatch_sync<span class="list">(<span class="keyword">concurrentQueue</span>, ^&#123;</span><br><span class="line">        [NSThread sleepForTimeInterval:<span class="number">3</span>]<span class="comment">;</span></span><br><span class="line">        NSLog<span class="list">(@<span class="string">"5"</span>)</span><span class="comment">;</span></span><br><span class="line">    &#125;)</span><span class="comment">;</span></span><br><span class="line">    NSLog<span class="list">(@<span class="string">"6"</span>)</span><span class="comment">;</span></span><br><span class="line">&#125;)</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>4.GCDåœ¨å•ä¾‹ä¸­çš„è¿ç”¨dispatch_once</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="built_in">dispatch_once_t</span> onceToken;</span><br><span class="line"><span class="built_in">dispatch_once</span>(&amp;onceToken, ^&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"onceToken"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>5.å»¶è¿ŸåŠ è½½dispatch_after</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> delayInSeconds = <span class="number">2.0</span>;</span><br><span class="line"><span class="built_in">dispatch_queue_t</span> mainQueue = dispatch_get_main_queue();</span><br><span class="line">dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW,delayInSeconds * <span class="built_in">NSEC_PER_SEC</span>);</span><br><span class="line">dispatch_after(popTime, mainQueue, ^&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"å»¶æ—¶æ‰§è¡Œçš„2ç§’"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>6.è°ƒåº¦ç»„dispatch_group_t</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">dispatch_group_t group = dispatch_group_create();</span><br><span class="line"><span class="built_in">dispatch_queue_t</span> defaultQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>);</span><br><span class="line">dispatch_group_async(group, defaultQueue, ^&#123;</span><br><span class="line">    [<span class="built_in">NSThread</span> sleepForTimeInterval:<span class="number">3</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"1"</span>);</span><br><span class="line">&#125;);</span><br><span class="line">dispatch_group_async(group, defaultQueue, ^&#123;</span><br><span class="line">    [<span class="built_in">NSThread</span> sleepForTimeInterval:<span class="number">2</span>];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"2"</span>);</span><br><span class="line">&#125;);</span><br><span class="line">dispatch_group_notify(group, defaultQueue, ^&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"3"</span>);</span><br><span class="line">&#125;);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ç­‰ä»·äº</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">//    dispatch_group_enter(group);</span></span><br><span class="line"><span class="comment">//    dispatch_async(defaultQueue, ^&#123;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        NSLog(@"1");</span></span><br><span class="line"><span class="comment">//        dispatch_group_leave(group);</span></span><br><span class="line"><span class="comment">//    &#125;);</span></span><br></pre></td></tr></table></figure>
<p>7.dispatch_barrier_async</p>
<p>åœ¨å‰é¢çš„ä»»åŠ¡æ‰§è¡Œç»“æŸåå®ƒæ‰æ‰§è¡Œï¼Œè€Œä¸”å®ƒåé¢çš„ä»»åŠ¡ç­‰å®ƒæ‰§è¡Œå®Œæˆä¹‹åæ‰ä¼šæ‰§è¡Œ.</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">dispatch_queue_t queue = dispatch_queue_create<span class="list">(<span class="string">"com.bjsxt.barrierExecute"</span>, DISPATCH_QUEUE_CONCURRENT)</span><span class="comment">;</span></span><br><span class="line">dispatch_async<span class="list">(<span class="keyword">queue</span>, ^&#123;</span><br><span class="line">    [NSThread sleepForTimeInterval:<span class="number">2</span>]<span class="comment">;</span></span><br><span class="line">    NSLog<span class="list">(@<span class="string">"1"</span>)</span><span class="comment">;</span></span><br><span class="line">&#125;)</span><span class="comment">;</span></span><br><span class="line">dispatch_async<span class="list">(<span class="keyword">queue</span>, ^&#123;</span><br><span class="line">    [NSThread sleepForTimeInterval:<span class="number">4</span>]<span class="comment">;</span></span><br><span class="line">    NSLog<span class="list">(@<span class="string">"2"</span>)</span><span class="comment">;</span></span><br><span class="line">&#125;)</span><span class="comment">;</span></span><br><span class="line">dispatch_barrier_async<span class="list">(<span class="keyword">queue</span>, ^&#123;</span><br><span class="line">    NSLog<span class="list">(@<span class="string">"3"</span>)</span><span class="comment">;</span></span><br><span class="line">    [NSThread sleepForTimeInterval:<span class="number">4</span>]<span class="comment">;</span></span><br><span class="line">    </span><br><span class="line">&#125;)</span><span class="comment">;</span></span><br><span class="line">dispatch_async<span class="list">(<span class="keyword">queue</span>, ^&#123;</span><br><span class="line">    [NSThread sleepForTimeInterval:<span class="number">1</span>]<span class="comment">;</span></span><br><span class="line">    NSLog<span class="list">(@<span class="string">"4"</span>)</span><span class="comment">;</span></span><br><span class="line">&#125;)</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>8.æ‰§è¡ŒæŸä¸ªä»£ç dispatch_apply</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dispatch_queue_t defaultQueue = dispatch_get_global_queue<span class="list">(<span class="keyword">DISPATCH_QUEUE_PRIORITY_DEFAULT</span>, <span class="number">0</span>)</span><span class="comment">;</span></span><br><span class="line">    dispatch_apply<span class="list">(<span class="number">5</span>, defaultQueue, ^<span class="list">(<span class="keyword">size_t</span> i)</span> &#123;</span><br><span class="line">        NSLog<span class="list">(@<span class="string">"%lu"</span>,i)</span><span class="comment">;</span></span><br><span class="line">&#125;)</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>å‚è€ƒæ–‡ç« ï¼š</p>
<p><a href="https://github.com/nixzhu/dev-blog" target="_blank" rel="external">https://github.com/nixzhu/dev-blog</a></p>
<p><a href="http://objccn.io/issue-2-1/" target="_blank" rel="external">http://objccn.io/issue-2-1/</a></p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://lyjh.net/2015/09/27/iOSå¤šçº¿ç¨‹GCDè¯¦è§£/" data-id="cihpmvh7l000vq0wq3xnqau56" class="article-share-link" data-share="baidu">åˆ†äº«åˆ°</a>
      

      
        <a href="http://lyjh.net/2015/09/27/iOSå¤šçº¿ç¨‹GCDè¯¦è§£/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/æ•™ç¨‹/">æ•™ç¨‹</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-UISearchControllerè¯¦è§£" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/09/18/UISearchControllerè¯¦è§£/" class="article-date">
  <time datetime="2015-09-18T15:44:55.000Z" itemprop="datePublished">2015-09-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOSæ•™ç¨‹/">iOSæ•™ç¨‹</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/18/UISearchControllerè¯¦è§£/">UISearchControllerè¯¦è§£</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>UISearchControlleræ˜¯iOS 8æ–°åŠ çš„ä¸€ä¸ªç±»ï¼Œå®ƒç”¨æ¥ä»£æ›¿ä¹‹å‰çš„UISearchDisplayControllerã€‚</p>
<blockquote>
<p>NS_CLASS_DEPRECATED_IOS(3_0, 8_0, â€œUISearchDisplayController has been replaced with UISearchControllerâ€)</p>
</blockquote>
<p>ç¨å¾®ç ”ç©¶äº†ä¸‹ï¼Œå®ƒä»¬ç”¨æ³•å·®ä¸å¤šï¼Œ<code>UISearchController</code>æ›´çµæ´»ç‚¹ã€‚<br>ä¸‹é¢ç®€å•è®²è§£ä¸€ä¸‹<code>UISearchController</code>ï¼š</p>
<h3 id="initWithSearchResultsController">initWithSearchResultsController</h3><p>åœ¨åˆå§‹åŒ–<code>UISearchController</code>å®ƒè¦æ±‚æˆ‘ä»¬è¦å…ˆè®¾è®¡å¥½çš„<code>searchResultsController</code>è¿™ä¸ªæ§åˆ¶å™¨,å®ƒå¯ä»¥æ˜¯<code>UITableViewController</code>ï¼Œä¹Ÿå¯ä»¥æ˜¯<code>UICollectionViewController</code>,ä¹Ÿå¯ä»¥æ˜¯<code>nil</code>ã€‚å¦‚æœè®¾ä¸º<code>nil</code>çš„è¯ï¼Œé‚£æ•°æ®æºå’Œæœç´¢ç»“æœå…±ç”¨ä¸€ä¸ª<code>Controller</code>ã€‚</p>
<h3 id="dimsBackgroundDuringPresentation">dimsBackgroundDuringPresentation</h3><p>è®¾ç½®å¼€å§‹æœç´¢æ—¶èƒŒæ™¯æ˜¯å¦æ˜¾ç¤º</p>
<h3 id="hidesNavigationBarDuringPresentation">hidesNavigationBarDuringPresentation</h3><p>è®¾ç½®å¼€å§‹æœç´¢æ—¶å¯¼èˆªæ¡æ˜¯å¦éšè—</p>
<h3 id="searchResultsUpdater">searchResultsUpdater</h3><p>è¿™ä¸ªæ–¹æ³•å¾ˆé‡è¦ï¼Œå½“searchBarçš„å­—ç¬¦å†…å®¹æ”¹å˜æ—¶ç³»ç»Ÿå›è°ƒï¼Œæˆ‘ä»¬ä¸€èˆ¬åœ¨è¿™é‡ŒæŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„æœç´¢ç»“æœã€‚</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span><span class="variable">.searchController</span><span class="variable">.searchResultsUpdater</span> = <span class="keyword">self</span>;</span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#pragma mark - UISearchResultsUpdating Methods</span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)updateSearchResultsForSearchController:(<span class="built_in">UISearchController</span> *)searchController &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>UISearchControllerDelegate è¿˜æä¾›äº†å¼€å§‹æœç´¢ï¼Œç»“æŸæœç´¢çš„å‡ ä¸ªä»£ç†æ–¹æ³•ã€‚æ¯”è¾ƒç®€å•å°±ç•¥è¿‡å§ã€‚</p>
<p>UISearchBarDelegate çš„ç”¨æ³•å’Œä»¥å‰ä¸€æ ·ä¹Ÿç•¥è¿‡ã€‚</p>
<h3 id="NSPredicate">NSPredicate</h3><p>æœç´¢è¿‡ç¨‹ä¸­ä¸€èˆ¬ä½¿ç”¨NSPredicateã€‚</p>
<p>è°“è¯ä¸­SELFä»£è¡¨è¢«æŸ¥è¯¢çš„é›†åˆã€‚è¿™å¥è°“è¯çš„æ„æ€æ˜¯æŸ¥æ‰¾é›†åˆä¸­åŒ…å«æœç´ å­—ç¬¦ä¸²çš„æ•°æ®ã€‚</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSPredicate</span> *preicate = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"SELF CONTAINS[c] %@"</span>, searchString];  </span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">self</span><span class="variable">.searchResults</span> != <span class="literal">nil</span>) &#123;</span><br><span class="line">    [<span class="keyword">self</span><span class="variable">.searchResults</span> removeAllObjects];    </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">self</span><span class="variable">.searchResults</span> = [<span class="built_in">NSMutableArray</span> arrayWithArray:[<span class="keyword">self</span><span class="variable">.dataList</span> filteredArrayUsingPredicate:preicate]];</span><br></pre></td></tr></table></figure>
<p>UISearchControllerDemo æˆ‘æ”¾åˆ°äº†ç½‘ç›˜ä¸Šäº†ã€‚<a href="http://pan.baidu.com/s/1i3LD8Y5" target="_blank" rel="external">http://pan.baidu.com/s/1i3LD8Y5</a></p>
<p>å¤§å®¶å¯ä»¥å»ä¸‹ï¼Œå†™äº†ä¸¤ä¸ªå·¥ç¨‹ï¼ŒUISearchControllerçš„ä¸åŒå¯åŠ¨æ ·å¼ã€‚</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://lyjh.net/2015/09/18/UISearchControllerè¯¦è§£/" data-id="cihpmvh85001jq0wqu7f50pem" class="article-share-link" data-share="baidu">åˆ†äº«åˆ°</a>
      

      
        <a href="http://lyjh.net/2015/09/18/UISearchControllerè¯¦è§£/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/æ•™ç¨‹/">æ•™ç¨‹</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Gitä½¿ç”¨æ•™ç¨‹" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/09/06/Gitä½¿ç”¨æ•™ç¨‹/" class="article-date">
  <time datetime="2015-09-06T15:44:55.000Z" itemprop="datePublished">2015-09-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Gitä½¿ç”¨æ•™ç¨‹/">Gitä½¿ç”¨æ•™ç¨‹</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/06/Gitä½¿ç”¨æ•™ç¨‹/">Gitä½¿ç”¨æ•™ç¨‹</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Gitæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç”¨ä»¥æœ‰æ•ˆã€é«˜é€Ÿçš„å¤„ç†ä»å¾ˆå°åˆ°éå¸¸å¤§çš„é¡¹ç›®ç‰ˆæœ¬ç®¡ç†ã€‚</p>
<h2 id="å®‰è£…Git">å®‰è£…Git</h2><p>1.æ–¹æ³•ä¸€ï¼š<br>å®‰è£…homebrewï¼Œç„¶åé€šè¿‡<code>homebrew</code>å®‰è£…Gitã€‚</p>
<p>ç¬¬ä¸€æ­¥ï¼šåœ¨ç»ˆç«¯è¾“å…¥å¦‚ä¸‹å‘½ä»¤å®‰è£…<code>homebrew</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby <span class="operator">-e</span> <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>"</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒæ­¥ï¼šæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œé€šè¿‡Homebrewå®‰è£…Gitã€‚</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew <span class="keyword">install</span> git</span><br></pre></td></tr></table></figure>
<p>å…·ä½“æ–¹æ³•è¯·å‚è€ƒ<code>homebrew</code>çš„æ–‡æ¡£ï¼š<a href="http://brew.sh/" target="_blank" rel="external">http://brew.sh/</a></p>
<blockquote>
<p>Homebrew ç”¨Rubyè¯­è¨€å¼€å‘ï¼Œæ”¯æŒåƒä½™ç§å¼€æºè½¯ä»¶åœ¨ Mac OS X ä¸­çš„éƒ¨ç½²å’Œç®¡ç†ã€‚</p>
</blockquote>
<p>2.æ–¹æ³•äºŒï¼š</p>
<p>ç›´æ¥å»gitå®˜ç½‘ä¸‹è½½å°±å¥½ <a href="http://git-scm.com/downloads/" target="_blank" rel="external">http://git-scm.com/downloads/</a></p>
<h2 id="ä½¿ç”¨Git">ä½¿ç”¨Git</h2><p>é€šå¸¸ä½¿ç”¨gitåˆ›å»ºç‰ˆæœ¬åº“ï¼Œåˆå«ä»“åº“ã€‚<br>ç¬¬ä¸€æ­¥ï¼šåœ¨åˆé€‚çš„åœ°æ–¹åˆ›å»ºä¸€ä¸ªç›®å½•ã€‚</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">mkdir</span> firstgit</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cd</span> firstgit</span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒæ­¥ï¼šç”¨ <code>git init</code> å‘½ä»¤å°†è¿™ä¸ªç›®å½•å˜æˆå¯ä»¥ä½¿ç”¨gitç®¡ç†çš„ä»“åº“ã€‚</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br><span class="line">Initialized empty Git repository <span class="keyword">in</span> <span class="regexp">/Users/</span>dahuan<span class="regexp">/Desktop/</span>MultithreadingDemo<span class="regexp">/.git/</span></span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œ <code>ls -a</code> ä¼šå‘ç°ç›®å½•é‡Œå¤š<code>.git</code>æ–‡ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯gitç”¨æ¥è·Ÿè¸ªç®¡ç†çš„æ–‡ä»¶ã€‚</p>
<p>ç¬¬ä¸‰æ­¥ï¼šåœ¨è¿™ä¸ªç›®å½•ä¸‹åˆ›å»ºä¸ªæ–‡ä»¶ï¼Œå¹¶è¾“å…¥ä¸€äº›å†…å®¹ã€‚</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>vi readme.txt</span><br></pre></td></tr></table></figure>
<p>ç¬¬å››æ­¥ï¼šç”¨å‘½ä»¤<code>git add</code>å‘Šè¯‰Gitï¼ŒæŠŠæ–‡ä»¶æ·»åŠ åˆ°ä»“åº“</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="keyword">add</span> readme.txt</span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¦‚æœè¦æ·»åŠ çš„æ–‡ä»¶å¤ªå¤šå¯ä»¥è¿™ä¹ˆå†™ git add -a </p>
</blockquote>
<p>ç¬¬äº”æ­¥ï¼šç”¨å‘½ä»¤<code>git commit</code>æŠŠæ–‡ä»¶æäº¤åˆ°ä»“åº“</p>
<figure class="highlight smalltalk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="char">$ </span>git commit -m <span class="comment">"wrote a readme file"</span></span><br></pre></td></tr></table></figure>
<p>è‡³æ­¤æˆ‘ä»¬å·²ç»æˆåŠŸåœ°æ·»åŠ å¹¶æäº¤äº†ä¸€ä¸ªreadme.txtæ–‡ä»¶åˆ°æœ¬åœ°ä»“åº“ã€‚</p>
<h2 id="å°†æœ¬åœ°ä»“åº“æäº¤åˆ°è¿œç¨‹ä»“åº“github">å°†æœ¬åœ°ä»“åº“æäº¤åˆ°è¿œç¨‹ä»“åº“github</h2><p>å®Œå…¨å¯ä»¥è‡ªå·±æ­å»ºä¸€å°è¿è¡ŒGitçš„æœåŠ¡å™¨ï¼Œä¸è¿‡ç°é˜¶æ®µï¼Œä¸ºäº†å­¦Gitå…ˆæ­ä¸ªæœåŠ¡å™¨ç»å¯¹æ˜¯å°é¢˜å¤§ä½œã€‚å¥½åœ¨è¿™ä¸ªä¸–ç•Œä¸Šæœ‰ä¸ªå«GitHubçš„ç¥å¥‡çš„ç½‘ç«™ï¼Œä»åå­—å°±å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªç½‘ç«™å°±æ˜¯æä¾›Gitä»“åº“æ‰˜ç®¡æœåŠ¡çš„ï¼Œæ‰€ä»¥ï¼Œåªè¦æ³¨å†Œä¸€ä¸ªGitHubè´¦å·ï¼Œå°±å¯ä»¥å…è´¹è·å¾—Gitè¿œç¨‹ä»“åº“ã€‚</p>
<p>åœ¨ç»§ç»­é˜…è¯»åç»­å†…å®¹å‰ï¼Œè¯·è‡ªè¡Œæ³¨å†ŒGitHubè´¦å·ã€‚ç”±äºä½ çš„æœ¬åœ°Gitä»“åº“å’ŒGitHubä»“åº“ä¹‹é—´çš„ä¼ è¾“æ˜¯é€šè¿‡SSHåŠ å¯†çš„ï¼Œæ‰€ä»¥ï¼Œéœ€è¦ä¸€ç‚¹è®¾ç½®ï¼š</p>
<p>åˆ›å»ºSSH Keyã€‚åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰.sshç›®å½•ï¼Œå¦‚æœæœ‰ï¼Œå†çœ‹çœ‹è¿™ä¸ªç›®å½•ä¸‹æœ‰æ²¡æœ‰id_rsaå’Œid_rsa.pubè¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦‚æœå·²ç»æœ‰äº†ï¼Œå¯ç›´æ¥è·³åˆ°ä¸‹ä¸€æ­¥ã€‚å¦‚æœæ²¡æœ‰ï¼Œæ‰“å¼€Shellï¼ˆWindowsä¸‹æ‰“å¼€Git Bashï¼‰ï¼Œåˆ›å»ºSSH Keyï¼š</p>
<figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -<span class="keyword">C</span> <span class="string">"xxxxx@xxxxx.com"</span></span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹ä½ çš„public key</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ~<span class="regexp">/.ssh/id</span>_rsa.pub</span><br></pre></td></tr></table></figure>
<p>ç™»é™†GitHubï¼Œæ‰“å¼€â€œAccount settingsâ€ï¼Œç„¶åï¼Œç‚¹â€œAdd SSH Keyâ€ï¼Œå¡«ä¸Šä»»æ„Titleï¼Œåœ¨Keyæ–‡æœ¬æ¡†é‡Œç²˜è´´id_rsa.pubæ–‡ä»¶çš„å†…å®¹ã€‚ç‚¹â€œAdd Keyâ€ï¼Œä½ å°±åº”è¯¥çœ‹åˆ°å·²ç»æ·»åŠ çš„Keyã€‚ä¸ºäº†éªŒè¯æ˜¯å¦æˆåŠŸã€‚</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>ssh -<span class="constant">T </span>git<span class="variable">@github</span>.com</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡çš„ä¼šæç¤ºæ˜¯å¦continueï¼Œè¾“å…¥yeså°±ä¼šçœ‹åˆ°ï¼šYouâ€™ve successfully authenticated, but GitHub does not provide shell access ã€‚è¿™å°±è¡¨ç¤ºå·²æˆåŠŸè¿ä¸Šgithubã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬è¦åšçš„å°±æ˜¯æŠŠæœ¬åœ°ä»“åº“ä¼ åˆ°githubä¸Šå»ï¼Œåœ¨æ­¤ä¹‹å‰è¿˜éœ€è¦è®¾ç½®usernameå’Œemailï¼Œå› ä¸ºgithubæ¯æ¬¡commitéƒ½ä¼šè®°å½•ä»–ä»¬ã€‚</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user<span class="class">.name</span> <span class="string">"your name"</span></span><br><span class="line">$ git config --global user<span class="class">.email</span> <span class="string">"your_email@youremail.com"</span></span><br></pre></td></tr></table></figure>
<p>ä¸ºä»€ä¹ˆGitHubéœ€è¦SSH Keyå‘¢ï¼Ÿå› ä¸ºGitHubéœ€è¦è¯†åˆ«å‡ºä½ æ¨é€çš„æäº¤ç¡®å®æ˜¯ä½ æ¨é€çš„ï¼Œè€Œä¸æ˜¯åˆ«äººå†’å……çš„ï¼Œè€ŒGitæ”¯æŒSSHåè®®ï¼Œæ‰€ä»¥ï¼ŒGitHubåªè¦çŸ¥é“äº†ä½ çš„å…¬é’¥ï¼Œå°±å¯ä»¥ç¡®è®¤åªæœ‰ä½ è‡ªå·±æ‰èƒ½æ¨é€ã€‚</p>
<p>ç™»é™†GitHubï¼Œç„¶åï¼Œåœ¨å³ä¸Šè§’æ‰¾åˆ°â€œCreate a new repoâ€æŒ‰é’®ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“ã€‚<br>åœ¨Repository nameå¡«å…¥firstgitï¼Œå…¶ä»–ä¿æŒé»˜è®¤è®¾ç½®ï¼Œç‚¹å‡»â€œCreate repositoryâ€æŒ‰é’®ï¼Œå°±æˆåŠŸåœ°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„Gitä»“åº“ã€‚</p>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬æ ¹æ®GitHubçš„æç¤ºï¼Œåœ¨æœ¬åœ°çš„firstgitä»“åº“ä¸‹è¿è¡Œå‘½ä»¤ï¼š</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>git remote add origin git<span class="variable">@github</span>.xxxx/xxxx.git</span><br></pre></td></tr></table></figure>
<blockquote>
<p>originæ˜¯é»˜è®¤çš„ä¸»æœºå</p>
<p>git@github.xxxx/xxxx.gitæ˜¯ç½‘å€</p>
</blockquote>
<p>è¿™æ ·æˆ‘ä»¬å°±åœ¨æœ¬åœ°.gitä¸Šè®¾ç½®äº†è¿œç¨‹ä¸»æœºã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¨é€æœ¬åœ°ä»“åº“è‡³è¿œç¨‹ä»“åº“ï¼š</p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="keyword">push</span> -u origin master</span><br></pre></td></tr></table></figure>
<blockquote>
<p>master æ˜¯æœ¬åœ°ä¸»æœºçš„é»˜è®¤åˆ†æ”¯åã€‚</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://lyjh.net/2015/09/06/Gitä½¿ç”¨æ•™ç¨‹/" data-id="cihpmvh89001qq0wqzvja2v95" class="article-share-link" data-share="baidu">åˆ†äº«åˆ°</a>
      

      
        <a href="http://lyjh.net/2015/09/06/Gitä½¿ç”¨æ•™ç¨‹/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/æ•™ç¨‹/">æ•™ç¨‹</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-è¯¾ç¨‹demo" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/09/01/è¯¾ç¨‹demo/" class="article-date">
  <time datetime="2015-09-01T15:44:55.000Z" itemprop="datePublished">2015-09-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOSæ•™ç¨‹/">iOSæ•™ç¨‹</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/01/è¯¾ç¨‹demo/">å°šå­¦å ‚è¯¾ç¨‹demo</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://pan.baidu.com/s/1i3LD8Y5" target="_blank" rel="external">è¯¾ç¨‹demo</a></p>
<p>æ—¶é—´å…³ç³»å…ˆå†™äº›å°demoï¼Œæœ‰æ—¶é—´åœ¨å†™äº›è®²è§£æ•™ç¨‹</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://lyjh.net/2015/09/01/è¯¾ç¨‹demo/" data-id="cihpmvh6t0001q0wqlzkt0152" class="article-share-link" data-share="baidu">åˆ†äº«åˆ°</a>
      

      
        <a href="http://lyjh.net/2015/09/01/è¯¾ç¨‹demo/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/æ•™ç¨‹/">æ•™ç¨‹</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-èŠèŠUIWebView" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/04/06/èŠèŠUIWebView/" class="article-date">
  <time datetime="2015-04-06T15:44:55.000Z" itemprop="datePublished">2015-04-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/æŠ€æœ¯æ–‡ç« /">æŠ€æœ¯æ–‡ç« </a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/04/06/èŠèŠUIWebView/">èŠèŠ UIWebView</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>UIWebViewæ˜¯è‹¹æœç»™æˆ‘ä»¬æä¾›å±•ç¤ºç½‘é¡µçš„ä¸€ç§æ§ä»¶ã€‚</p>
<h2 id="UIWebViewçš„åŸºæœ¬ç”¨æ³•">UIWebViewçš„åŸºæœ¬ç”¨æ³•</h2><p>æˆ‘ä»¬ä¸€èˆ¬è¿™æ ·åˆ›å»ºå¹¶åŠ è½½ä¸€ä¸ªæœåŠ¡å™¨ç«¯çš„ç½‘é¡µï¼š</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-(<span class="built_in">UIWebView</span> *)webview</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!_webview) &#123;</span><br><span class="line">        </span><br><span class="line">        _webview = [[<span class="built_in">UIWebView</span> alloc] init];</span><br><span class="line">        _webview<span class="variable">.scalesPageToFit</span> = <span class="literal">YES</span>;</span><br><span class="line">        _webview<span class="variable">.delegate</span> = <span class="keyword">self</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">NSURL</span> *url =[<span class="built_in">NSURL</span> URLWithString:<span class="keyword">self</span><span class="variable">.urlString</span>];</span><br><span class="line">        <span class="built_in">NSURLRequest</span> *request =[<span class="built_in">NSURLRequest</span> requestWithURL:url];</span><br><span class="line">        [_webview loadRequest:request];</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _webview;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åƒè¿™æ ·åŠ è½½ä¸€ä¸ªæœ¬åœ°ç½‘é¡µï¼š</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">UIWebView</span> *)webView</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!_webView) &#123;</span><br><span class="line">        </span><br><span class="line">        _webView = [[<span class="built_in">UIWebView</span> alloc] init];</span><br><span class="line">        _webView<span class="variable">.scalesPageToFit</span> = <span class="literal">YES</span>;</span><br><span class="line">        _webView<span class="variable">.delegate</span> = <span class="keyword">self</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">NSString</span> *resourcePath = [[[<span class="built_in">NSBundle</span> mainBundle] bundlePath] stringByAppendingString:<span class="string">@"/LocalWeb"</span>];</span><br><span class="line">        <span class="built_in">NSString</span> *filePath = [resourcePath stringByAppendingPathComponent:<span class="string">@"index.html"</span>];</span><br><span class="line">        <span class="built_in">NSString</span> *htmlstring=[[<span class="built_in">NSString</span> alloc] initWithContentsOfFile:filePath  encoding:<span class="built_in">NSUTF8StringEncoding</span> error:<span class="literal">nil</span>];</span><br><span class="line">        [_webView loadHTMLString:htmlstring baseURL:[<span class="built_in">NSURL</span> fileURLWithPath:resourcePath]];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _webView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼šå¦‚æœæ˜¯è½½å…¥æœ¬åœ°ç½‘é¡µåœ¨æ·»åŠ æ–‡ä»¶å¤¹æ—¶åº”é€‰æ‹© Create folder references,è€Œä¸æ˜¯ Create groups åˆ›å»ºæ‰€è°“çš„é€»è¾‘æ–‡ä»¶å¤¹ã€‚</p>
</blockquote>
<h2 id="iOS_Native_ä¸_HTML5_ä¹‹é—´çš„äº¤äº’">iOS Native ä¸ HTML5 ä¹‹é—´çš„äº¤äº’</h2><p>Html5çš„æœ‰å¾ˆå¤šä¼˜ç‚¹ï¼Œæ¯”å¦‚å¼€å‘é€Ÿåº¦å¿«ï¼Œappä¸Šçº¿ä¹Ÿå¯ä»¥éšæ„ä¿®æ”¹å…å®¡æ ¸ï¼Œè·¨å¹³å°ï¼Œæ•ˆæœä¹Ÿä¸é”™ã€‚ç¬¬ä¸€æ¬¡å¬è¯´è¿™ä¸ªæ··åˆå¼å¼€å‘è¿˜æ˜¯åœ¨å¤§ä¼—ç‚¹è¯„çš„ä¸€æ¬¡æ²™é¾™è§†é¢‘ä¸Šï¼Œæ…¢æ…¢çš„ï¼Œå˜å¾—è¶Šæ¥è¶Šæµè¡Œã€‚Cordovaå’Œå®ƒçš„å‰èº«PhoneGap,å›½å†…çš„WebViewJavascriptBridgeéƒ½æ˜¯å¾ˆå¥½çš„æ··åˆå¼€å‘è§£å†³æ–¹æ¡ˆã€‚å¦‚æœä¼ é€’çš„å‚æ•°æ¯”è¾ƒç®€å•ï¼ŒåŠŸèƒ½ä¸å¤æ‚çš„è¯ï¼Œä¸ç”¨ä¸‰æ–¹ä¹Ÿå¯ä»¥å¾ˆå®¹æ˜“çš„å®ç°ã€‚</p>
<h3 id="Objective-C_è°ƒç”¨_JavaScript">Objective-C è°ƒç”¨ JavaScript</h3><p>å¯ä»¥ä½¿ç”¨webviewè°ƒç”¨å¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">-</span> (<span class="tag">NSString</span> *)<span class="rule"><span class="attribute">stringByEvaluatingJavaScriptFromString</span>:<span class="value">(NSString *)script</span></span>;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•å‘UIWebViewä¼ é€’ä¸€æ®µéœ€è¦æ‰§è¡Œçš„JavaScriptä»£ç æœ€åè·å–æ‰§è¡Œç»“æœã€‚</p>
<p>æ¯”å¦‚åš<code>åº·å¸ˆå‚…</code>é‚£ä¸ªé¡¹ç›®æ—¶ï¼Œæˆ‘éœ€è¦ç‚¹å‡»Nativeçš„buttonè·å–ç½‘é¡µä¸Šçš„æ–‡å­—ï¼Œç”¨æ¥å½“é‚®ä»¶å†…å®¹ï¼š</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//getEmailContent();å°±æ˜¯jsçš„æ–¹æ³•å</span></span><br><span class="line"><span class="comment">//bodyå°±æ˜¯getEmailContentæ–¹æ³•è¿”å›çš„æ–‡å­—ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">NSString</span> * body =[<span class="keyword">self</span><span class="variable">.webView</span> stringByEvaluatingJavaScriptFromString:<span class="string">@"getEmailContent();"</span>];</span><br></pre></td></tr></table></figure>
<h3 id="JavaScript_è°ƒç”¨_Objective-C">JavaScript è°ƒç”¨ Objective-C</h3><p>å®ç°ç‚¹å‡»ç½‘é¡µä¸Šçš„æŒ‰é’®ï¼Œè°ƒç”¨åŸç”Ÿçš„æ–¹æ³•éœ€è¦ç”¨åˆ°webviewçš„ä¸€ä¸ªä»£ç†ï¼š</p>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="pp">- <span class="params">(<span class="variable">BOOL</span>)</span>webView:<span class="params">(<span class="variable">UIWebView</span> *)</span>webView shouldStartLoadWithRequest:<span class="params">(<span class="variable">NSURLRequest</span> *)</span>request navigationType:<span class="params">(<span class="variable">UIWebViewNavigationType</span>)</span>navigationType</span></span><br></pre></td></tr></table></figure>
<p>è¯¦ç»†è¯´ä¸€ä¸‹è°ƒç”¨æµç¨‹ï¼š</p>
<p>ç‚¹å‡»æŒ‰é’®è¦JSå‘é€åƒè¿™æ · <code>yuefan://jump?invitingID=1</code> çš„ä¸€æ¡åè®®ç»™ <code>native app</code>,</p>
<p>ç„¶åappé€šè¿‡ä»£ç†æ”¶åˆ°è¿™ä¸ªåè®®ï¼Œå°±å¯ä»¥æ ¹æ®åè®®è°ƒç”¨è‡ªèº«çš„æ–¹æ³•äº†ã€‚</p>
<p>ä¸¾ä¸ªæ —å­ï¼š</p>
<p>Appç«¯</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)<span class="string">webView:</span>(UIWebView *)webView <span class="string">shouldStartLoadWithRequest:</span>(NSURLRequest *)request <span class="string">navigationType:</span>(UIWebViewNavigationType)navigationType</span><br><span class="line">&#123;</span><br><span class="line">    NSURL * url = [request URL];</span><br><span class="line">    <span class="keyword">if</span> ([[url scheme] <span class="string">isEqualToString:</span>@<span class="string">"yuefan"</span>]) &#123;</span><br><span class="line">        <span class="keyword">if</span> ([[url host] <span class="string">isEqualToString:</span>@<span class="string">"jump"</span>]) &#123;</span><br><span class="line">            </span><br><span class="line">            ShopDetailViewController * issuedVC = [[ShopDetailViewController alloc] init];</span><br><span class="line">            issuedVC.shopID = [[url <span class="string">valueForParameter:</span>@<span class="string">"shopID"</span>] intValue];</span><br><span class="line">            [self.navigationController <span class="string">pushViewController:</span>issuedVC <span class="string">animated:</span>YES];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Htmlç«¯</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">http-equiv</span>=<span class="value">"content-type"</span> <span class="attribute">content</span>=<span class="value">"text/html;charset=utf-8"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">title</span>&gt;</span>æµ‹è¯•ç½‘é¡µ<span class="tag">&lt;/<span class="title">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"yuefan://jump?invitingID=1"</span>&gt;</span>ç‚¹å‡»å‘é€<span class="tag">&lt;/<span class="title">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://lyjh.net/2015/04/06/èŠèŠUIWebView/" data-id="cihpmvh700006q0wq274hpnhe" class="article-share-link" data-share="baidu">åˆ†äº«åˆ°</a>
      

      
        <a href="http://lyjh.net/2015/04/06/èŠèŠUIWebView/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/UIWebView/">UIWebView</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-iOS Core Bluetooth" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/03/12/iOS Core Bluetooth/" class="article-date">
  <time datetime="2015-03-12T15:44:55.000Z" itemprop="datePublished">2015-03-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/æŠ€æœ¯æ–‡ç« /">æŠ€æœ¯æ–‡ç« </a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/03/12/iOS Core Bluetooth/">iOS Core Bluetooth</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>æœ€è¿‘å…¬å¸åšäº†ä¸¤ä¸ªé¡¹ç›®éƒ½ç”¨åˆ°äº†è“ç‰™ï¼Œä¸€ä¸ªæ˜¯åœ¨è½¦è½®ä¸Šçš„å®‰è£…è“ç‰™è®¾å¤‡ï¼Œä¼ å›¾ç‰‡ç»™è“ç‰™ï¼Œå½“è½®å­æ—‹è½¬ï¼Œåœ¨è½¦è½®ä¸Šå‘ˆç°ç”»é¢ï¼ŒæŒºé…·ä¸€ä¸œè¥¿ã€‚è¿˜æœ‰ä¸€ä¸ªè¿˜æ²¡ä¸Šçº¿,å°±ä¸è¯´äº†ã€‚æœ‰æœºä¼šç ”ç©¶æ–°ä¸œè¥¿ï¼Œè¿˜æ˜¯ä¸é”™çš„ã€‚è®°å½•ä¸‹è“ç‰™å¼€å‘ï¼š</p>
<p>å…ˆæ˜ç¡®5ä¸ªæ¦‚å¿µï¼š</p>
<ul>
<li>CBCentral  ä¸­å¿ƒè®¾å¤‡ï¼ˆè“ç‰™ä¸»æœºï¼‰</li>
<li>CBPeripheral  å¤–è®¾ï¼ˆè“ç‰™ä»æœºï¼‰</li>
<li>CBService æœåŠ¡</li>
<li>CBCharacteristic ç‰¹å¾</li>
<li>CBUUID UUID</li>
</ul>
<p>è“ç‰™è¿æ¥çš„æ­¥éª¤å°±æ˜¯å»ºç«‹ä¸­å¿ƒè®¾å¤‡ï¼Œæ‰«æå¤–è®¾ï¼ŒæŒ‰ç¡¬ä»¶è¯è¯´å°±æ˜¯ä¸»æœºæ‰¾ä»æœºã€‚åœ¨å¤–è®¾ä¸­æ‰¾åˆ°æœåŠ¡ï¼Œåœ¨æœåŠ¡é‡Œæ‰¾åˆ°å®ƒæ‰€æœ‰çš„ç‰¹å¾ã€‚<br>å†™äº†ä¸ªBluetoothHelperï¼Œæ³¨é‡Šå·²ç»å†™çš„å¾ˆæ¸…æ¥šäº†ã€‚</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br></pre></td><td class="code"><pre><span class="line">BluetoothHelper<span class="variable">.h</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#import <span class="title">&lt;Foundation/Foundation.h&gt;</span></span></span><br><span class="line"><span class="preprocessor">#import <span class="title">&lt;CoreBluetooth/CoreBluetooth.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">BluetoothHelper</span> : <span class="title">NSObject</span>&lt;<span class="title">CBCentralManagerDelegate</span>,<span class="title">CBPeripheralDelegate</span>&gt;</span></span><br><span class="line"></span><br><span class="line">+ (BluetoothHelper *)sharedInstance;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)connect;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)disConnect;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)sendData:(<span class="built_in">NSString</span> *)command;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">BluetoothHelper<span class="variable">.m</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#import <span class="title">"BluetoothHelper.h"</span></span></span><br><span class="line"><span class="preprocessor">#import <span class="title">"ToolHelper.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> kName = <span class="string">@"BLE_Serial"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> kSU<span class="built_in">UID</span>= <span class="string">@"0003CDD0-XXXX-XXXX-XXXX-00805f9bXXXX"</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> KNotifyU<span class="built_in">UID</span> = <span class="string">@"0003CDD1-XXXX-XXXX-XXXX-00805f9bXXXX"</span>;</span><br><span class="line"><span class="keyword">static</span> <span class="built_in">NSString</span> * <span class="keyword">const</span> kWriteU<span class="built_in">UID</span>= <span class="string">@"0003CDD2-XXXX-XXXX-XXXX-00805f9bXXXX"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">BluetoothHelper</span> ()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) CBCentralManager * manger;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) CBPeripheral * cbPeripheral;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">BOOL</span> blueIsOn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">BluetoothHelper</span></span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#pragma mark - life cycle</span></span><br><span class="line"></span><br><span class="line">+ (BluetoothHelper *)sharedInstance&#123;</span><br><span class="line">    <span class="keyword">static</span> BluetoothHelper *instance = <span class="literal">nil</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="built_in">dispatch_once_t</span> predicate;</span><br><span class="line">    <span class="built_in">dispatch_once</span>(&amp;predicate, ^&#123;</span><br><span class="line">        instance = [[<span class="keyword">self</span> alloc] init];</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> instance;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (instancetype)init&#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span><span class="variable">.manger</span> = [[CBCentralManager alloc]initWithDelegate:<span class="keyword">self</span> queue:<span class="literal">nil</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#pragma mark - CBCentralManagerDelegate Methods</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ£€æµ‹è“ç‰™çŠ¶æ€</span></span><br><span class="line">- (<span class="keyword">void</span>)centralManagerDidUpdateState:(CBCentralManager *)central&#123;</span><br><span class="line">    <span class="keyword">switch</span> (central<span class="variable">.state</span>) &#123;</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">case</span> CBCentralManagerStatePoweredOn:&#123;</span><br><span class="line">            <span class="keyword">self</span><span class="variable">.blueIsOn</span> = <span class="literal">YES</span>;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> CBCentralManagerStateResetting:</span><br><span class="line">        <span class="keyword">case</span> CBCentralManagerStateUnauthorized:</span><br><span class="line">        <span class="keyword">case</span> CBCentralManagerStateUnknown:</span><br><span class="line">        <span class="keyword">case</span> CBCentralManagerStateUnsupported:</span><br><span class="line">        <span class="keyword">case</span> CBCentralManagerStatePoweredOff:&#123;</span><br><span class="line">            <span class="keyword">self</span><span class="variable">.blueIsOn</span> = <span class="literal">NO</span>;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@"Central Manager did change state"</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘ç°è“ç‰™è®¾å¤‡</span></span><br><span class="line">- (<span class="keyword">void</span>)centralManager:(CBCentralManager *)central didDiscoverPeripheral:(CBPeripheral *)peripheral advertisementData:(<span class="built_in">NSDictionary</span> *)advertisementData RSSI:(<span class="built_in">NSNumber</span> *)RSSI&#123;</span><br><span class="line">    <span class="comment">//è®¾ç½®ç›‘å¬ï¼Œä»¥ä¿è¯å§‹ç»ˆå¯»æ‰¾å¤–è®¾</span></span><br><span class="line">    [<span class="keyword">self</span> startScanningTimeoutMonitor];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> ([peripheral<span class="variable">.name</span> isEqualToString:kName]) &#123;</span><br><span class="line">        [<span class="keyword">self</span><span class="variable">.manger</span> stopScan];</span><br><span class="line">        [<span class="keyword">self</span><span class="variable">.manger</span> connectPeripheral:peripheral options:<span class="literal">nil</span>];</span><br><span class="line">        <span class="keyword">self</span><span class="variable">.cbPeripheral</span> = peripheral;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"å‘ç°è“ç‰™%@"</span>,peripheral);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿æ¥å¤–è®¾æˆåŠŸ</span></span><br><span class="line">-(<span class="keyword">void</span>)centralManager:(CBCentralManager *)central didConnectPeripheral:(CBPeripheral *)peripheral&#123;</span><br><span class="line">    <span class="keyword">self</span><span class="variable">.cbPeripheral</span> = peripheral;</span><br><span class="line">    <span class="keyword">self</span><span class="variable">.cbPeripheral</span><span class="variable">.delegate</span> = <span class="keyword">self</span>;</span><br><span class="line">    [<span class="keyword">self</span><span class="variable">.cbPeripheral</span> discoverServices:@[]];</span><br><span class="line">    [<span class="keyword">self</span> cancelScanningTimeoutMonitor];</span><br><span class="line">    [<span class="keyword">self</span> cancelSendTimeOut];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"è¿æ¥æˆåŠŸ%@"</span>,<span class="keyword">self</span><span class="variable">.cbPeripheral</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿æ¥å¤–è®¾å¤±è´¥</span></span><br><span class="line">- (<span class="keyword">void</span>)centralManager:(CBCentralManager *)central didFailToConnectPeripheral:(CBPeripheral *)peripheral error:(<span class="built_in">NSError</span> *)error&#123;</span><br><span class="line">    <span class="keyword">if</span> (error) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"è¿æ¥å¤±è´¥ERRORï¼š%@ peripheral:%@"</span>,error,peripheral);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ–­å¼€å¤–è®¾è¿æ¥</span></span><br><span class="line">-(<span class="keyword">void</span>)centralManager:(CBCentralManager *)central didDisconnectPeripheral:(CBPeripheral *)peripheral error:(<span class="built_in">NSError</span> *)error&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"æ–­å¼€è¿æ¥%@"</span>,peripheral);</span><br><span class="line">    <span class="keyword">self</span><span class="variable">.cbPeripheral</span> = <span class="literal">nil</span>;</span><br><span class="line">    [ToolHelper showErrorMessage:<span class="string">@"è¿æ¥å¤±è´¥ï¼Œé‡æ–°è¿æ¥"</span>];</span><br><span class="line">    [<span class="keyword">self</span> connect];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#pragma mark - CBPeripheralDelegate Methods</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å·²æœç´¢åˆ°services æ ¹æ®å‘¨è¾¹æ‰¾ç‰¹å¾</span></span><br><span class="line">-(<span class="keyword">void</span>) peripheral:(CBPeripheral *)peripheral didDiscoverServices:(<span class="built_in">NSError</span> *)error&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (CBService *s <span class="keyword">in</span> peripheral<span class="variable">.services</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ([s<span class="variable">.UUID</span> isEqual:[CBU<span class="built_in">UID</span> U<span class="built_in">UIDWithString</span>:kSU<span class="built_in">UID</span>]]) &#123;</span><br><span class="line">            [peripheral discoverCharacteristics:<span class="literal">nil</span> forService:s];</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@"æ‰¾åˆ°å‘¨è¾¹peripheralï¼š%@ Service:%@"</span>,peripheral,s);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å·²æœç´¢åˆ°Characteristics  è®¾ç½®è®¢é˜…</span></span><br><span class="line">- (<span class="keyword">void</span>)peripheral:(CBPeripheral *)peripheral didDiscoverCharacteristicsForService:(CBService *)service error:(<span class="built_in">NSError</span> *)error&#123;</span><br><span class="line">    <span class="keyword">for</span> (CBCharacteristic *c <span class="keyword">in</span> service<span class="variable">.characteristics</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ([c<span class="variable">.UUID</span> isEqual:[CBU<span class="built_in">UID</span> U<span class="built_in">UIDWithString</span>:KNotifyU<span class="built_in">UID</span>]]) &#123;</span><br><span class="line">            <span class="comment">//è®¾ç½®ç›‘å¬ç„¶åä¼šèµ°didUpdateNotificationStateForCharacteristic</span></span><br><span class="line">            [peripheral setNotifyValue:<span class="literal">YES</span> forCharacteristic:c];</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@"è®¾ç½®è®¢é˜… peripheral%@ Characteristic%@"</span>,peripheral,c);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ³¨å†Œè®¢é˜…åçš„ä¸­é—´é€šçŸ¥æ­¥éª¤ åˆ¤æ–­æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">- (<span class="keyword">void</span>)peripheral:(CBPeripheral *)peripheral didUpdateNotificationStateForCharacteristic:(CBCharacteristic *)characteristic error:(<span class="built_in">NSError</span> *)error&#123;</span><br><span class="line">    <span class="keyword">if</span> (error == <span class="literal">nil</span>) &#123;</span><br><span class="line">        [peripheral readValueForCharacteristic:characteristic];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"è®¾ç½®è¯»å–è¿”å›æ•°æ® peripheral%@ characteristic%@"</span>,peripheral,characteristic);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ç»™å¤–è®¾å‘é€æŒ‡å®šå­—ç¬¦éªŒè¯æ˜¯å¦è”é€š</span></span><br><span class="line">    [<span class="keyword">self</span> sendData:<span class="string">@"yue?"</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è“ç‰™å›ä¼ çš„æ•°æ®éƒ½ä¼šä»è¿™ä¸ªæ–¹æ³•ä¸­å¾—åˆ°</span></span><br><span class="line">- (<span class="keyword">void</span>)peripheral:(CBPeripheral *)peripheral didUpdateValueForCharacteristic:(CBCharacteristic *)characteristic error:(<span class="built_in">NSError</span> *)error&#123;</span><br><span class="line">    <span class="keyword">if</span> (error) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"è¿”å›æ•°æ®ERROR:%@"</span>,error);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">NSString</span> * updateString = [[<span class="built_in">NSString</span> alloc]initWithData:characteristic<span class="variable">.value</span> encoding:<span class="built_in">NSUTF8StringEncoding</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"updateString - %@"</span>,updateString);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> ([updateString isEqualToString:<span class="string">@"yue!"</span>])&#123;</span><br><span class="line">        </span><br><span class="line">        [ToolHelper showSuccessMessage:<span class="string">@"æˆåŠŸè¿æ¥è®¾å¤‡"</span>];</span><br><span class="line">        </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#pragma mark - private methods</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠŠè¦å‘é€çš„æ•°æ®ç”¨ASCIIç¼–ç </span></span><br><span class="line">- (<span class="keyword">void</span>)sendData:(<span class="built_in">NSString</span> *)command</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSData</span> * data = [command dataUsingEncoding:<span class="built_in">NSASCIIStringEncoding</span>];</span><br><span class="line">    [<span class="keyword">self</span> writeData:data];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°†æ•°æ®ä¼ é€ç»™è“ç‰™</span></span><br><span class="line">- (<span class="keyword">void</span>)writeData:(<span class="built_in">NSData</span> *)bluetoothData&#123;</span><br><span class="line">    <span class="keyword">for</span> (CBService *service <span class="keyword">in</span> <span class="keyword">self</span><span class="variable">.cbPeripheral</span><span class="variable">.services</span> ) &#123;</span><br><span class="line">        <span class="keyword">if</span> ([service<span class="variable">.UUID</span> isEqual:[CBU<span class="built_in">UID</span> U<span class="built_in">UIDWithString</span>:kSU<span class="built_in">UID</span>]]) &#123;</span><br><span class="line">            <span class="keyword">for</span> ( CBCharacteristic *characteristic <span class="keyword">in</span> service<span class="variable">.characteristics</span> ) &#123;</span><br><span class="line">                <span class="keyword">if</span> ([characteristic<span class="variable">.UUID</span> isEqual:[CBU<span class="built_in">UID</span> U<span class="built_in">UIDWithString</span>:kWriteU<span class="built_in">UID</span>]]) &#123;</span><br><span class="line">                    <span class="comment">/* EVERYTHING IS FOUND, WRITE characteristic ! */</span></span><br><span class="line">                    [<span class="keyword">self</span><span class="variable">.cbPeripheral</span> writeValue:bluetoothData forCharacteristic:characteristic type:CBCharacteristicWriteWithoutResponse];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#pragma mark - public methods</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯»æ‰¾å¤–è®¾</span></span><br><span class="line">- (<span class="keyword">void</span>)connect&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span><span class="variable">.blueIsOn</span>) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"scan...."</span>);</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">self</span><span class="variable">.cbPeripheral</span>)&#123;</span><br><span class="line">            [<span class="keyword">self</span><span class="variable">.manger</span> connectPeripheral:<span class="keyword">self</span><span class="variable">.cbPeripheral</span> options:<span class="literal">nil</span>];</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            [<span class="keyword">self</span><span class="variable">.manger</span> scanForPeripheralsWithServices:<span class="literal">nil</span>  options:@&#123;CBCentralManagerScanOptionAllowDuplicatesKey : @YES &#125;];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    [<span class="keyword">self</span> startSendTimeOut];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ–­å¼€è“ç‰™è¿æ¥</span></span><br><span class="line">- (<span class="keyword">void</span>)disConnect&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span><span class="variable">.cbPeripheral</span>) &#123;</span><br><span class="line">        [<span class="keyword">self</span><span class="variable">.manger</span> cancelPeripheralConnection:<span class="keyword">self</span><span class="variable">.cbPeripheral</span>];</span><br><span class="line">        [<span class="keyword">self</span><span class="variable">.manger</span> stopScan];</span><br><span class="line">    &#125;</span><br><span class="line">    [ToolHelper showErrorMessage:<span class="string">@"å‘é€å¤±è´¥ï¼Œè¯·é‡æ–°å‘é€"</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="preprocessor">#pragma mark - Connection Timeout</span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)startScanningTimeoutMonitor &#123;</span><br><span class="line">    [<span class="keyword">self</span> cancelScanningTimeoutMonitor];</span><br><span class="line">    [<span class="keyword">self</span> performSelector:<span class="keyword">@selector</span>(connect)</span><br><span class="line">               withObject:<span class="literal">nil</span></span><br><span class="line">               afterDelay:<span class="number">2.0</span>f];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)cancelScanningTimeoutMonitor &#123;</span><br><span class="line">    [<span class="built_in">NSObject</span> cancelPreviousPerformRequestsWithTarget:<span class="keyword">self</span></span><br><span class="line">                                             selector:<span class="keyword">@selector</span>(connect)</span><br><span class="line">                                               object:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)startSendTimeOut &#123;</span><br><span class="line">    [<span class="keyword">self</span> performSelector:<span class="keyword">@selector</span>(disConnect)</span><br><span class="line">               withObject:<span class="literal">nil</span></span><br><span class="line">               afterDelay:<span class="number">60.0</span>f];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)cancelSendTimeOut &#123;</span><br><span class="line">    [<span class="built_in">NSObject</span> cancelPreviousPerformRequestsWithTarget:<span class="keyword">self</span></span><br><span class="line">                                             selector:<span class="keyword">@selector</span>(disConnect)</span><br><span class="line">                                               object:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://lyjh.net/2015/03/12/iOS Core Bluetooth/" data-id="cihpmvh7v0018q0wqm3rl0abv" class="article-share-link" data-share="baidu">åˆ†äº«åˆ°</a>
      

      
        <a href="http://lyjh.net/2015/03/12/iOS Core Bluetooth/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Core-Bluetooth/">Core Bluetooth</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-å…³äºbackBarButtonItemçš„Nç§æ–¹æ³•" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/02/10/å…³äºbackBarButtonItemçš„Nç§æ–¹æ³•/" class="article-date">
  <time datetime="2015-02-10T04:48:02.000Z" itemprop="datePublished">2015-02-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/æŠ€æœ¯æ–‡ç« /">æŠ€æœ¯æ–‡ç« </a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/02/10/å…³äºbackBarButtonItemçš„Nç§æ–¹æ³•/">å…³äºbackBarButtonItemçš„Nç§æ–¹æ³•</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="æ›¿æ¢è¿”å›æŒ‰é’®çš„æ–‡å­—">æ›¿æ¢è¿”å›æŒ‰é’®çš„æ–‡å­—</h2><p>å¾ˆå¤šappçš„è¦æ±‚æ‰€æœ‰çš„è¿”å›æŒ‰é’®çš„titleéƒ½æ˜¯â€œè¿”å›â€ï¼Œå¦‚æœä¸Šä¸€å±‚é¢˜ç›®æ–‡å­—å¤ªå¤šï¼Œä¸‹ä¸€å±‚çš„è¿”å›æŒ‰é’®æ–‡å­—å°±ä¼šæ˜¾ç¤ºä¸å®Œå…¨ï¼Œè€Œä¸”è¿™æ ·å¯ä»¥ä½¿è½¯ä»¶æ˜¾å¾—æ•´æ´ã€‚</p>
<h3 id="æ–¹æ³•ä¸€ï¼š">æ–¹æ³•ä¸€ï¼š</h3><p>æœ€æ™®é€šçš„æƒ³æ³•ï¼ŒAç•Œé¢çš„navigationItem.backBarButtonItemä¿®æ”¹çš„æ˜¯Bï¼ˆAçš„ä¸‹ä¸€çº§ï¼‰ç•Œé¢çš„è¿”å›æŒ‰é’®ï¼Œæ‰€ä»¥å¯ä»¥å†™ä¸€ä¸ª<code>BaseViewController</code>ï¼Œè®©æ‰€æœ‰çš„<code>UIViewController</code>ç»§æ‰¿å®ƒï¼Œåƒè¿™æ ·</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    <span class="keyword">self</span><span class="variable">.navigationItem</span><span class="variable">.backBarButtonItem</span> = [[<span class="built_in">UIBarButtonItem</span> alloc] initWithTitle:<span class="string">@"è¿”å›"</span> style:<span class="built_in">UIBarButtonItemStylePlain</span> target:<span class="literal">nil</span> action:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ–¹æ³•äºŒï¼š">æ–¹æ³•äºŒï¼š</h3><p>æ€è·¯æ˜¯ï¼šåœ¨å¼€å¯ç¨‹åºæ—¶ï¼Œä½¿ç”¨<code>Method Swizzling</code>,å°†ç³»ç»Ÿè‡ªå¸¦çš„<code>backBarButtonItem</code>æ–¹æ³•æ›¿æ¢æˆæˆ‘ä»¬è‡ªå®šä¹‰çš„æ–¹æ³•ã€‚</p>
<p>å…·ä½“å®ç°å°±æ˜¯åˆ›å»ºä¸ª <code>UINavigationItem + BackItem</code> çš„ç±»åˆ«ï¼Œå½“ç³»ç»Ÿæ‰§è¡Œ<code>+load</code>æ–¹æ³•æ—¶ï¼Œå°†<code>backBarButtonItem</code>æ–¹æ³•å’Œ<code>myCustomBackButton</code>æ–¹æ³•äº¤æ¢ï¼Œåˆ©ç”¨iOSå…³è”æ–¹æ³•<code>ï¼ˆobjc_getAssociatedObjectï¼Œobjc_setAssociatedObjectï¼‰</code>åœ¨<code>static</code>åŒºåˆ›å»ºä¸ª<code>backItemButton</code>ç”¨æ¥å±•ç¤ºã€‚è¿™ä¸ªæ–¹æ³•çš„å¥½å¤„å°±æ˜¯å°†ç±»åˆ«å¯¼å…¥åˆ°å·¥ç¨‹é‡Œä¸ç”¨ä»»ä½•ä»£ç å°±å¯ä»¥å®ç°ï¼Œä¸Šä»£ç å§ï¼š</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">+(<span class="keyword">void</span>)load&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="built_in">dispatch_once_t</span> onceToken;</span><br><span class="line">    <span class="built_in">dispatch_once</span>(&amp;onceToken, ^&#123;</span><br><span class="line">        Method originalMethodImp = class_getInstanceMethod(<span class="keyword">self</span>, <span class="keyword">@selector</span>(backBarButtonItem));</span><br><span class="line">        Method destMethodImp = class_getInstanceMethod(<span class="keyword">self</span>, <span class="keyword">@selector</span>(myCustomBackButton));</span><br><span class="line">        method_exchangeImplementations(originalMethodImp, destMethodImp);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">char</span> kCustomBackButtonKey;</span><br><span class="line"></span><br><span class="line">-(<span class="built_in">UIBarButtonItem</span> *)myCustomBackButton&#123;</span><br><span class="line">    <span class="built_in">UIBarButtonItem</span> *item = [<span class="keyword">self</span> myCustomBackButton];</span><br><span class="line">    <span class="keyword">if</span> (item) &#123;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line">    item = objc_getAssociatedObject(<span class="keyword">self</span>, &amp;kCustomBackButtonKey);</span><br><span class="line">    <span class="keyword">if</span> (!item) &#123;</span><br><span class="line">        item = [[<span class="built_in">UIBarButtonItem</span> alloc] initWithTitle:<span class="string">@"è¿”å›"</span> style:<span class="built_in">UIBarButtonItemStylePlain</span> target:<span class="literal">nil</span> action:<span class="literal">NULL</span>];</span><br><span class="line">        objc_setAssociatedObject(<span class="keyword">self</span>, &amp;kCustomBackButtonKey, item, OBJC_ASSO<span class="built_in">CIATION_RETAIN_NONATOMIC</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> item;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)dealloc</span><br><span class="line">&#123;</span><br><span class="line">    objc_removeAssociatedObjects(<span class="keyword">self</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="è¿”å›æŒ‰é’®åªæ˜¾ç¤ºè‡ªå®šä¹‰å›¾ç‰‡">è¿”å›æŒ‰é’®åªæ˜¾ç¤ºè‡ªå®šä¹‰å›¾ç‰‡</h2><h3 id="æ–¹æ³•ä¸€ï¼š-1">æ–¹æ³•ä¸€ï¼š</h3><p>æœ€å¼€å§‹æˆ‘çš„æ–¹æ¡ˆæ˜¯å®ç°<code>UINavigationController</code>çš„ä»£ç†åˆ¤æ–­æ˜¯å¦æ˜¯æ ˆåº•ï¼Œå¦‚æœä¸æ˜¯å°±ä¿®æ”¹<code>leftBarButtonItem</code>çš„æ ·å¼ã€‚</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)navigationController:(<span class="built_in">UINavigationController</span> *)navigationController willShowViewController:(<span class="built_in">UIViewController</span> *)viewController animated:(<span class="built_in">BOOL</span>)animated</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">UIViewController</span> *root = navigationController<span class="variable">.viewControllers</span>[<span class="number">0</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (root != viewController) &#123;</span><br><span class="line">        <span class="built_in">UIBarButtonItem</span> *itemleft = [[<span class="built_in">UIBarButtonItem</span> alloc] initWithImage:[<span class="built_in">UIImage</span> imageNamed:<span class="string">@"backBtn"</span>] style:<span class="built_in">UIBarButtonItemStylePlain</span> target:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(popAction:)];</span><br><span class="line">        viewController<span class="variable">.navigationItem</span><span class="variable">.leftBarButtonItem</span> = itemleft;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)popAction:(<span class="built_in">UIBarButtonItem</span> *)barButtonItem</span><br><span class="line">&#123;</span><br><span class="line">    [<span class="keyword">self</span><span class="variable">.navigationController</span> popViewControllerAnimated:<span class="literal">YES</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†<code>iOS7.0</code>å‡ºäº†ä¹‹åï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„è§£å†³æ–¹æ¡ˆã€‚å› ä¸º<code>iOS7.0</code>ä¹‹åå¦‚æœæŠŠ<code>backItemButton</code>æ›¿æ¢æˆ<code>leftItemButon</code>,<code>interactivePopGestureRecognizer</code>æ‰‹åŠ¿å°±æ²¡æœ‰äº†ã€‚è™½ç„¶å¯ä»¥ä½¿ç”¨</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span><span class="variable">.navigationController</span><span class="variable">.interactivePopGestureRecognizer</span><span class="variable">.delegate</span> = (<span class="keyword">id</span>&lt;<span class="built_in">UIGestureRecognizerDelegate</span>&gt;)<span class="keyword">self</span>;</span><br></pre></td></tr></table></figure>
<p>å°†æ‰‹åŠ¿å†åŠ ä¸Šï¼Œä½†å®åœ¨æ˜¯æœ‰äº›éº»çƒ¦ã€‚ã€‚å¯æ˜¯å¾ˆå¤šå¤§å…¬å¸ç”¨çš„éƒ½æ˜¯è¿™ä¸ªæ–¹æ³•ã€‚</p>
<h3 id="æ–¹æ³•äºŒï¼š-1">æ–¹æ³•äºŒï¼š</h3><p>è¿™ä¸ªæ–¹æ³•å’Œä¸Šè¾¹â€˜æ›¿æ¢è¿”å›æŒ‰é’®çš„æ–‡å­—â€™æ–¹æ³•äºŒå¤§è‡´ä¸€æ ·,è¿™å¥è¯è¦æ›¿æ¢:</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">item = [[UIBarButtonItem alloc] <span class="string">initWithImage:</span>[UIImage <span class="string">imageNamed:</span>@<span class="string">"back"</span>] <span class="string">style:</span>UIBarButtonItemStylePlain <span class="string">target:</span>nil <span class="string">action:</span>nil];</span><br></pre></td></tr></table></figure>
<p>è¿™å¥è¯è¦åŠ ä¸Šï¼Œç”¨æ¥å»é™¤ç³»ç»Ÿè‡ªå¸¦çš„è¿”å›æŒ‰é’®ä¸Šçš„å°–è„šå·ã€‚</p>
<figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="collection">[<span class="collection">[UINavigationBar appearance]</span> setBackIndicatorImage:<span class="collection">[<span class="collection">[UIImage alloc]</span>init]</span>]</span><span class="comment">;</span></span><br><span class="line"><span class="collection">[<span class="collection">[UINavigationBar appearance]</span> setBackIndicatorTransitionMaskImage:<span class="collection">[<span class="collection">[UIImage alloc]</span> init]</span>]</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://lyjh.net/2015/02/10/å…³äºbackBarButtonItemçš„Nç§æ–¹æ³•/" data-id="cihpmvh78000kq0wqkg7p5pxq" class="article-share-link" data-share="baidu">åˆ†äº«åˆ°</a>
      

      
        <a href="http://lyjh.net/2015/02/10/å…³äºbackBarButtonItemçš„Nç§æ–¹æ³•/#ds-thread" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/UIKit/">UIKit</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</section>
      
      <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">åˆ†ç±»</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Gitä½¿ç”¨æ•™ç¨‹/">Gitä½¿ç”¨æ•™ç¨‹</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOSæ•™ç¨‹/">iOSæ•™ç¨‹</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOSé¢è¯•é¢˜/">iOSé¢è¯•é¢˜</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯æ–‡ç« /">æŠ€æœ¯æ–‡ç« </a><span class="category-list-count">11</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ ‡ç­¾</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Core-Bluetooth/">Core Bluetooth</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CoreAnimation/">CoreAnimation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CoreLocation/">CoreLocation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Masonry/">Masonry</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UIKit/">UIKit</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UIWebView/">UIWebView</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/URL-Scheme/">URL Scheme</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/åŠ¨ç”»/">åŠ¨ç”»</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ•™ç¨‹/">æ•™ç¨‹</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç¥å™¨/">ç¥å™¨</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/è®¾è®¡æ¨¡å¼/">è®¾è®¡æ¨¡å¼</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/é¢è¯•é¢˜/">é¢è¯•é¢˜</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ ‡ç­¾äº‘</h3>
    <div class="widget tagcloud">
      <a href="/tags/Core-Bluetooth/" style="font-size: 10px;">Core Bluetooth</a><a href="/tags/CoreAnimation/" style="font-size: 10px;">CoreAnimation</a><a href="/tags/CoreLocation/" style="font-size: 10px;">CoreLocation</a><a href="/tags/Masonry/" style="font-size: 10px;">Masonry</a><a href="/tags/UIKit/" style="font-size: 10px;">UIKit</a><a href="/tags/UIWebView/" style="font-size: 10px;">UIWebView</a><a href="/tags/URL-Scheme/" style="font-size: 10px;">URL Scheme</a><a href="/tags/åŠ¨ç”»/" style="font-size: 10px;">åŠ¨ç”»</a><a href="/tags/æ•™ç¨‹/" style="font-size: 20px;">æ•™ç¨‹</a><a href="/tags/ç¥å™¨/" style="font-size: 15px;">ç¥å™¨</a><a href="/tags/è®¾è®¡æ¨¡å¼/" style="font-size: 15px;">è®¾è®¡æ¨¡å¼</a><a href="/tags/é¢è¯•é¢˜/" style="font-size: 10px;">é¢è¯•é¢˜</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">å½’æ¡£</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">åäºŒæœˆ 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">åæœˆ 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">ä¹æœˆ 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">å››æœˆ 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">ä¸‰æœˆ 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">äºŒæœˆ 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">ä¸€æœˆ 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">åäºŒæœˆ 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">åä¸€æœˆ 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">åæœˆ 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">å…«æœˆ 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">ä¸ƒæœˆ 2014</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">è¿‘æœŸæ–‡ç« </h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/12/03/iOSè®¾è®¡æ¨¡å¼KVO/">iOSè®¾è®¡æ¨¡å¼ â€”â€” KV0</a>
          </li>
        
          <li>
            <a href="/2015/12/02/iOSè®¾è®¡æ¨¡å¼KVC/">iOSè®¾è®¡æ¨¡å¼ â€”â€” KVC</a>
          </li>
        
          <li>
            <a href="/2015/10/10/ç®€å†æ•´ç†/">iOSé¢è¯•é¢˜</a>
          </li>
        
          <li>
            <a href="/2015/09/27/iOSå¤šçº¿ç¨‹GCDè¯¦è§£/">iOSå¤šçº¿ç¨‹GCDè¯¦è§£</a>
          </li>
        
          <li>
            <a href="/2015/09/18/UISearchControllerè¯¦è§£/">UISearchControllerè¯¦è§£</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">å‹æƒ…é“¾æ¥</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="http://weibo.com/liuyujiahuan" target="_blank">æˆ‘çš„å¾®åš</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 liuyujiahuan<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">é¦–é¡µ</a>
  
    <a href="/archives" class="mobile-nav-link">å½’æ¡£</a>
  
    <a href="/about" class="mobile-nav-link">å…³äº</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="è¿”å›é¡¶éƒ¨"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->

<!-- å¤šè¯´å…¬å…±jsä»£ç  start -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"lyjh"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- å¤šè¯´å…¬å…±jsä»£ç  end -->


<!-- ç™¾åº¦åˆ†äº« start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="åˆ†äº«åˆ°å¾®ä¿¡"></a>
    <a class="article-share-qq" data-cmd="sqq" title="åˆ†äº«åˆ°QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="åˆ†äº«åˆ°äººäººç½‘"></a>
    <a class="article-share-more" data-cmd="more" title="æ›´å¤š"></a>
  </div>
</div>
<script>window._bd_share_config={"common":{},"share":{"bdCustomStyle":"/css/bdshare.css"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];</script>

<!-- ç™¾åº¦åˆ†äº« end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>




<script src="/js/script.js" type="text/javascript"></script>

</div>
</body>
</html>
